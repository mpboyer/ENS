\documentclass[math, info]{cours}
\title{Lambda-Calcul et Catégories}
\author{Paul-André Mellies}

\usetikzlibrary{shapes}
\tikzset{utriangle/.style={regular poygon, regular polygon sides=3,
    inner sep=0.5pt}}
\tikzset{btriangle/.style={regular polygon, regular polygon sides=3,
    shape border rotate=180, inner sep=0.5pt}}

\def\lambdaterme{$\lambda$-terme\ }
\def\lambdatermes{$\lambda$-termes\ }
\def\targ{\texttt{arg}}
\def\tfun{\texttt{fun}}
\def\tbody{\texttt{body}}
\def\walrus{\coloneqq}
\newcommand{\sub}[3]{#1\left[#2\walrus #3\right]}
\def\alphaequivalence{$\alpha$-équivalence\ }
\def\alphaequiv{\equiv_{\alpha}}
\def\alphaconv{$\alpha$-conversion\ }
\def\betaredex{$\beta$-redex\ }
\newcommand{\rrightarrow}{\mathrel{\mathrlap{\rightarrow}\mkern1mu\rightarrow}}
\DeclareMathOperator{\Redex}{Redex}
\DeclareMathOperator{\Occ}{Occ}


\begin{document}
\bettertitle

\section{Introduction}
\subsection{Introduction Historique}
Le $\lambda$-calcul a été introduit dans les années 1930 par Church.
Il est en lien avec des questions de linguistique, de logique et de calculabilité.
\begin{definition}
	Le $\lambda$-calcul est un langage de preuves pour une logique intuitionniste minimale (ou pour la théorie simple des types).
	\label{def:lambdacalcul}
\end{definition}
Le $\lambda$-calcul non typé a la puissance des machines de Turing.

\begin{definition}
	Les catégories sont des structures algébriques (parfois appelées monoïdes à plusieurs objets)
	\label{def:categoryyyyyyyy}
\end{definition}
Historiquement, les catégories ont été introduites pour la topologie algébriques dans les années 1940 avec les travaux de Eilenberg et Maclane.
Leur objectif était de comprendre les propriétés fondamentales des espaces en s'intéressant aux morphismes entre espaces (les fonctions continues).

Il y a une connexion forte au niveau de la théorie des preuves entre $\lambda$-calcul et théorie, qui est très similaire à ce qui s'était passé lors de la définition des algèbres de Boole.
Dans ce deuxième cas, Boole montre qu'on peut mettre un ordre partiel sur les formules de la logique classique:
\begin{equation*}
	\phi \leq \Psi \text{ si et seulement si } \phi \Rightarrow \Psi
\end{equation*}
Une algèbre de Boole $(A, \leq, \land, \lor, \lnot, \top, \bot)$ est un ensemble ordonné $A, \leq$ muni de fonctions préservant l'ordre $\land, \lor: A\times A \to A$:
\begin{equation*}
	\phi_{1} \leq \Psi_{1} \land \phi_{2} \leq \Psi_{2} \Longrightarrow \phi_{1} \land \phi_{2} \leq \Psi_{1}\land \Psi_{2}, \phi_{1} \lor \phi_{2} \leq \Psi_{1}\lor \Psi_{2}
\end{equation*}
et d'une fonction inversant l'ordre $\lnot: A \times A$:
\begin{equation*}
	\phi \leq \Psi \Rightarrow \lnot \Psi \leq \lnot \phi
\end{equation*}
vérifiant un certain nombre d'axiomes:
\begin{multicols}{2}
	\begin{itemize}
		\item Associativité:
		      \begin{align*}
			      \left(\phi_{1}\land\phi_{2}\right) \land \phi_{3} = \phi_{1}\land\left(\phi_{2}\land \phi_{3}\right) \\
			      \left(\phi_{1}\lor\phi_{2}\right) \lor \phi_{3} = \phi_{1}\lor\left(\phi_{2}\lor \phi_{3}\right)
		      \end{align*}
		\item Neutralité:
		      \begin{align*}
			      \phi \land \top = \top \land \phi = \phi \\
			      \phi \lor \bot = \bot \lor \phi = \phi
		      \end{align*}
		\item Commutativité:
		      \begin{equation*}
			      \phi \land \Psi = \Psi \land \phi, \phi \lor \Psi = \Psi \lor \phi
		      \end{equation*}
		\item Distributivité:
		      \begin{align*}
			      \phi \land \left(\Psi_{1} \lor \Psi_{2}\right) = \left(\phi \land \Psi_{1}\right) \lor \left(\phi \land \Psi_{2}\right) \\
			      \phi \lor \left(\Psi_{1} \land \Psi_{2}\right) = \left(\phi \lor \Psi_{1}\right) \land \left(\phi \lor \Psi_{2}\right)  \\
			      \lnot\left(\phi \land \Psi\right) = \lnot\phi \lor \lnot \Psi, \lnot\top = \bot
		      \end{align*}
		\item Idempotence:
		      \begin{align*}
			      \phi = \lnot\lnot \phi \\
			      \phi \land \phi = \phi, \phi \lor \phi = \phi
		      \end{align*}
	\end{itemize}
\end{multicols}
Dans une algèbre de Boole, $\phi \land \psi$ est le plus grand minorant de $\phi$ et de $\psi$ et $\phi \lor \psi$ est le plus petit majorant de $\phi$ et $\psi$
\begin{remarque}
	On peut définir l'implication dans les algèbres de Boole comme $\phi \implies \psi = \lnot\phi \lor \psi$
	\label{rem:implicationboole}
\end{remarque}
On va passer du système des algèbres de Boole ($\phi \leq \psi$ s'il existe une preuve que $\phi$ implique $\psi$)
au système de catégories comme proposé par Lambek.
\begin{definition}
	On peut voir une catégorie comme un graphe dont les noeuds sont appelés objets et les arêtes sont appelées morphismes, maps ou flèches.
	On peut composer les arêtes d'une catégorie, comme pour se déplacer sur le graphe.
\end{definition}
Ici on considère une catégorie dont les objets sont des formules logiques, et les morphismes sont des preuves d'implication.
Il y a donc des liens très forts entre les catégories obtenues avec des formules et des preuves et celles obtenues par des types et des programmes fonctionnels entre les types.
On va ici étudier les catégories à travers leurs représentations: on peut mieux comprendre une catégorie en la représentant comme une famille d'actions au moyen d'un foncteur.

\subsection{Notion de Catégorie: Premiers Exemples}
\begin{definition}[Catégorie]
	Une \emph{catégorie} est décrite par les données suivantes:
	\begin{itemize}
		\item[0] Une classe\footnote{propriété non incarnée par un ensemble} d'objets (les noeuds d'un graphe).
		      On appelle les catégories dont les objets définissent un ensemble des \emph{petites catégories}.
		\item[1] Pour toute paire d'objets $A, B$, un ensemble $\Hom(A, B)$ de fonctions de $A$ vers $B$ appelées \emph{morphismes} ou \emph{maps}.
		      On note ceci: $f: A \to B$ ou $A \xrightarrow{f} B$.
		\item[2] Pour tous objets $A, B, C$, une loi de composition $\circ_{A, B, C}$:
		      \begin{equation*}
			      \begin{array}{rcl}
				      \Hom(B, C) \times \Hom(A, B) & \rightarrow & \Hom(A, C) \\
				      (g, f)                       & \mapsto     & g\circ f
			      \end{array}
		      \end{equation*}
		\item[2] Pour tout objet $A$, une fonction identité $\id_{A} \in \Hom(A, A)$
		\item[3] Associativité:
		      \begin{center}
			      \begin{category}[]
				      & B \arrow{r}{g} & C\arrow{rd}{h} & \\
				      A\arrow{ur}{f}\arrow{urr}{g\circ f}\arrow{rrr}{h\circ\left(g\circ f\right)} & & & D
			      \end{category}
		      \end{center}
		      On peut aussi voir la composition comme la couverture de l'aire entre les noeuds du graphe:
		      \begin{category}[]
			      & B\arrow[r, no head]\arrow[drr, no head] & C \arrow[no head]{dr}{} & \\
			      A\arrow[ur, no head]\arrow[urr, crossing over, no head]\arrow[rrr, no head] & & & D
		      \end{category}
		      ou encore:
		      \begin{category}[]
			      & B\arrow[d, no head]\arrow[no head]{ddr}{}\arrow[no head]{ddl}{} & \\
			      & C\arrow[no head]{dr}{}\arrow[no head]{dl}{} & \\
			      A\arrow[rr, no head] & & D
		      \end{category}
		\item[3] Neutralité: $f\circ \id_{A} = f = \id_{B} \circ f$.
	\end{itemize}
	\label{def:categorie}
\end{definition}
\begin{remarque}
	Voir \emph{nerf d'une catégorie} pour voir la notion d'ensemble simplicial.
\end{remarque}

\begin{exemple}
	\begin{description}
		\item[PoSet] On considère d'abord les ensembles partiellement ordonnés comme des catégories:
		      \begin{proposition}
			      Chaque ensemble partiellement ordonné $(A, \leq)$ définit une catégorie dont les objets sont des éléments $a, b, c$ de $A$
			      avec une map $a\to b$ si et seulement si $a \leq b$ et $\Hom(a, b)$ un singleton si $a\leq b$ et $\emptyset$ sinon.
			      \label{prop:posetcat}
		      \end{proposition}
		      \begin{proof}
			      On doit montrer l'existence d'une identité, d'une loi de composition, et les propriétés d'associativité et de neutralité:
			      \begin{itemize}
				      \item Par réflexivité de l'ordre: $a \leq a$ et donc $a \xrightarrow{\id_{a}} a$ existe.
				      \item Par transitivité: si $a \leq b$ et $b \leq c$ alors $a\leq c$ et on peut donc voir la transitivité comme une composition:
				      \item L'associativité et la neutralité découlent immédiatement du fait que chaque $\Hom(a, b)$ contient au plus un élément.
			      \end{itemize}
		      \end{proof}

		      Réciproquement, une catégorie $\phi$ telle que chaque ensemble d'homomorphismes contienne au plus un élément est la même chose qu'un préordre:
		      \begin{category}[]
			      a\arrow[loop left]{l}{\id = g \circ f} \arrow{r}{f} &
			      b\arrow{l}{g} \arrow[loop right]{l}{f\circ g = \id}
		      \end{category}

		\item[Monoïde] On considère maintenant les Monoïdes comme des catégories.
		      \begin{proposition}
			      Chaque monoïde (M, m, e) définit une catégorie notée $\B M$ appelée sa suspension avec un seul objet $*$ tel que:
			      $\Hom(*, *) = M$ et $\circ: m, n \mapsto n\cdot m$.
			      \label{prop:moncat}
		      \end{proposition}
		      L'associativité et la neutralité de la catégorie $\B M$ sont des conséquences directes de l'associativité et de la neutralité du monoïde.

		      \begin{remarque}
			      En prenant $M = \left(\N, +, 0\right)$, la représentation ainsi obtenue des entiers a un lien direct avec la théorie de l'homotopie: c'est le groupe de Poincaré (ou groupe fondamental) d'un espace topologique pointé.
			      Tout espace topologique définit une catégorie dont les objets sont les éléments de l'espace topologique et les flèches sont les chemins, à homotopie près.
		      \end{remarque}

		\item[Types] On considère la catégorie cartésienne fermée des types simples comme objets et des $\lambda$-termes simplement typés (module $\beta\eta$-équivalence) comme morphismes:
		      \begin{category}[column sep=large]
			      A\arrow[r, "x:A\models t:B"]\dbarrow[rr, "{x:A\models a\left[t/y\right]: C}"] & B\arrow[r, "y:B\models u:C"] & C
		      \end{category}
		      $A \xrightarrow{x:A \models t:B} B \xrightarrow{y:B\models u:C} C$ flèche dessous ($x:A \models u[t/y]: C$)
		      Cette catégorie jouera le rôle en théorie de la démonstration de l'algèbre de Boole des formules
	\end{description}
\end{exemple}

\section{Catégories Cartésiennes}
\begin{definition}
	Un produit cartésien de deux objets $A$ et $B$ dans un catégorie $\phi$ est la donnée d'un triplet
	\begin{equation*}
		\left(A \times B, \pi_{1}: A\times B \to A, \pi_{2}: A \times B \to B\right)
	\end{equation*}
	\begin{category}[]
		A & & B \\
		& A\times B \arrow{ul}{\pi_{1}}\arrow{ur}{\pi_{2}} &
	\end{category}
	tel que pour toute paire de flèches: $X\xrightarrow{f} A$ et $X\xrightarrow{g} B$, il existe un et une seule flèche: $h: X \to A \times B$ telle que
	$f = \pi_{1} \circ h, g = \pi_{2} \circ h$.
	Pour $\phi = Set$, par exemple, $A \times B = \left\{(a, b)\mid a \in A, b\in B\right\}$ et $\pi_{1}: (a, b) \mapsto a$ et $h: x \mapsto (fx, gx)$.
	\label{def:prodcart}
\end{definition}

\begin{exemple}
	Dans une catégorie définie par une relation d'ordre sur $A, \leq$, le produit cartésien de $a, b\in A$ c'est la même chose que la borne inférieure $a\land b$ de $a$ et $b$ définie comme le plus grand des minorants de $a$ et $b$.
	\begin{category}[]
		a & & b\\
		& a\land b\arrow{ul}{\leq}\arrow{ur}{\leq} &\\
		& x\arrow[bend right]{uur}\arrow[bend left]{uul}\arrow[dotted]{u}{h} &
	\end{category}
\end{exemple}

\begin{definition}[Objet Terminal]
	Un objet terminal $\mathds{1}$ dans une catégorie $\cont$ est un objet tel que pour tout objet $A$ de $\cont$, $\Hom(A, \mathds{1})$ est une singleton.
	\label{def:objterm}
\end{definition}
\begin{remarque}
	Un objet initial est un objet terminal dans la catégorie duale (catégorie ou on renverse les flèches).
\end{remarque}

\begin{definition}
	Une catégorie cartésienne est une catégorie $\cont$ munie d'un produit cartésien $\left(A\times B, \pi_{1}, \pi_{2}\right)$ et munie d'un objet terminal.
	\label{def:cartcat}
\end{definition}

\begin{definition}
	Une paire $\mathds{I} \xrightarrow{f} \mathds{J}$ et $\mathds{J} \xrightarrow{g} \mathds{I}$ telle que $f\circ g= \id_{\mathds{J}}$ et $g\circ f = \id_{\mathds{I}}$ est appelée \emph{isomorphisme}
	\label{def:isomorphisme}
\end{definition}

\begin{proposition}
	Deux objets terminaux sont isomorphes. Deux produits cartésiens d'une même paire d'objets sont isomorphes.
	\label{prop:isomorphismeterminaux}
\end{proposition}
\begin{proof}
	Soit $\mathds{I}, \mathds{J}$ deux objets terminaux d'une même catégorie. Il existe un unique morphisme $f$ (resp. $g$) de $\mathds{I}$ (resp. $\mathds{J}$) vers $\mathds{J}$ (resp. $\mathds{I}$).
	De même, il existe un unique morphisme $\id_{\mathds{J}}$ de $\mathds{J}$ vers lui-même.
	Le diagramme ci-dessous commute donc:
	\begin{category}[/tikz/commutative diagrams/labels=description]
		& \mathds{J} & \\
		\mathds{J}\arrow{ur}{\id_{\mathds{J}}}\arrow{rr}{g} & & \mathds{I}\arrow{ul}{f}
	\end{category}
	En particulier, on a bien $f \circ g = \id_{\mathds{J}}$.
	Puisque la situation est symétrique, $g\circ f= \id_{\mathds{I}}$ et donc deux objets terminaux sont isomorphes.
	\medskip
	Si on a deux produits cartésiens $A\times B, A\otimes B$ de deux objets $A, B$, alors:
	\begin{category}[labels=description]
		A\times B\arrow[bend right]{ddr}{\pi_{A, 1}}\arrow{ddrr}{\pi_{B, 1}} & & & A\otimes B\arrow{ddll}{\pi_{A, 2}}\arrow[bend left]{ddl}{\pi_{B, 2}}\\
		& & &\\
		& A & B &
	\end{category}
	En particulier, par définition du produit cartésien, puisqu'il existe deux applications de $A\times B$ vers $A, B$, il existe une unique application $h_{1, 2}$ de $A\times B$ vers $A\otimes B$ telle que $\pi_{A, 2}\circ h_{1, 2} = \pi_{A, 1}$:
	\begin{category}[labels=description]
		& A\times B\arrow[bend left]{ddr}{\pi_{B, 1}}\arrow[bend right]{ddl}{\pi_{A, 1}}\arrow[bend right, dotted]{d}{f}& \\
		& A\otimes B\arrow[dotted, bend right]{u}{g}\arrow{dr}{\pi_{B, 2}}\arrow{dl}{\pi_{A, 2}} & \\
		A & & B
	\end{category}
	Il suffit donc de montrer que l'identité fait commuter le diagramme pour que avoir $f \circ g = \id_{A\times B}$ et donc le résultat:
	\begin{category}[]
		& & A\\
		& A & \\
		A\times B\arrow[r, "f"]\arrow[bend left=10, ur, "\pi_{A, 1}" description]\arrow[bend left=30, uurr, "\pi_{A, 1}" description]\arrow[bend right, drr, "\pi_{B, 1}" description] & A \otimes B\arrow[u, "\pi_{A, 2}" description]\arrow[r, "g" description] & A\times B\arrow[uu, "\pi_{A, 1}" description]\arrow[d, "\pi_{B, 2}" description] \\
		& & B\\
	\end{category}

	On aurait aussi pu construire une catégorie $Span(A, B)$:
	\begin{itemize}
		\item Les objets sont des triplets $\scalar{f, X, g}$:
		      \begin{category}[]
			      A &  & B\\
			      & X\arrow{ul}{f}\arrow[ur, "g" swap]&
		      \end{category}
		\item Les flèches sont des $\scalar{f, X, g} \xrightarrow{h} \scalar{f', Y, g'}$:
		      \begin{category}[]
			      & Y\arrow{dl}\arrow{dr} & \\
			      A & & B\\
			      & X\arrow{ur}\arrow{ul}\arrow{uu}{h} &
		      \end{category}
	\end{itemize}
	Alors, $A \times B, \pi_{1}, \pi_{2}$ est un produit cartésien dans $\cont$ si et seulement si $\scalar{\pi_{1}, A\times B, \pi_{2}}$ est un objet terminal dans $Span(A, B)$.
\end{proof}

\section{La 2-catégorie des catégories, foncteurs et transformations naturelles}
\subsection{Foncteurs entre Catégories}
\begin{definition}
	Soient $\A, \B$ deux catégories.
	Un foncteur $\mF : \A\to \B$ est la donnée de:
	\begin{enumerate}
		\item[0] Un objet $F(A) \in \B$ pour tout objet $A$ de $\A$.
		\item[1] Pour toute paire d'objets $A_{1}, A_{2} \in \A$, une fonction:
		      \begin{equation*}
			      F_{A_{1}, A_{2}}: \applic{\Hom_{\A}(A_{1}, A_{2})}{\Hom_{\B}(FA_{1}, FA_{2})}{f}{F(f)}
		      \end{equation*}
		\item[2] On demande que les équations suivantes soient satisfaites:
		      \begin{itemize}
			      \item $F(g \circ f) = F(g) \circ F(f)$ où
			            \begin{category}[]
				            & A_{2}\arrow[dr, "g"] &\\
				            A_{1}\arrow[ur, "f"]\arrow[rr, "g\circ f"] & & A_{3}
			            \end{category}
			            C'est à dire:
			            \begin{category}[]
				            A_{1}\arrow[d, "f"]\arrow[to path={[pos=0.25] -- ([xshift=.5cm]\tikztostart.east) |- (\tikztotarget) \tikztonodes}, dd, "g \circ f"] & & FA_{1}\arrow[d, "Ff"]\arrow[to path={[pos=0.25] -- ([xshift=.5cm]\tikztostart.east) |- (\tikztotarget) \tikztonodes}, dd, "Fg \circ Ff"] & \\
				            A_{2}\arrow[d, "g"] & & FA_{2}\arrow[d, "Fg"] & \\
				            A_{3} & & FA_{3} &
			            \end{category}
			      \item Si $A \xrightarrow{\id_{A}} A$, $F(\id_{A}) = \id_{F(A)}$
		      \end{itemize}
		      Autrement dit, l'image de la composée est égale à la composée des images.
	\end{enumerate}
	\label{def:foncteur}
\end{definition}

\begin{exemple}
	\begin{enumerate}
		\item Un foncteur $F : \A \to \B$ entre catégories de préordre est la même chose qu'une fonction croissante (order preserving).
		\item Un foncteur $F : \A \to \B$ entre catégories à un objet est la même chose qu'un homomorphisme $M \to N$ si $\A = \Sigma M$ et $\B = \Sigma N$.
		\item Si $M$ est un monoïde, $\A = \Sigma M$ la catégorie à un objet associée, un foncteur $F: \A \to \mathrm{Set}$ la catégorie des ensembles et fonctions est la donnée d'un ensemble $X$ (l'image de $M$) et d'une action à gauche de $M$ sur $X$.
		      En effet, puisque chaque élément de $M$ est une flèche de $\Sigma M$ de l'objet dans lui même, pour tous $m, n \in M$, on a une flèche de $F(*)\to F(*)$ telles que $F(m\cdot n) = F(m) \circ F(n)$.
		      On vérifie alors bien les propriétés d'une action à gauche.

		      Similairement, si $M$ est le monoïde libre engendré par un alphabet $A$, l'action à droite $X \times A^{*} \to X$ étant une famille de fonctions $\delta_{a} : X \to X$ pour $a \in A$, i.e. un automate déterministe et total dont l'ensemble des états est $X$.
		\item Soit $\mathbb{G}$ la catégorie à deux objets et quatre morphismes:
		      \begin{category}[]
			      1\arrow[loop right, "\id_{1}"]\arrow[d, shift left,"s"]\arrow[d, shift right,"t" swap]\\
			      0\arrow[loop right, "\id_{0}"]
		      \end{category}
		      Un foncteur $F:\mathbb{G} \to \mathrm{Set}$ est une paire d'ensembles $E= F(1)$, $V = F(0)$, et de deux fonctions $F(s), F(t): E \to V$.
		      En voyant $E$ comme un ensemble d'arêtes et $V$ comme un ensemble de sommets, $F(s)$ peut être vue comme une fonction $\partial_{0}$ qui à une arête $(x, y)$ associe $x$.
		      Rajouter un élément $2$ avec deux morphismes vers $1$ permettrait de définir des graphes avec des $2$-arêtes entre arêtes.
		      En prenant la catégorie des faces d'un triangle on obtiendrait la catégorie des ensembles simpliciaux.
	\end{enumerate}
\end{exemple}

\subsection{Transformations entre Foncteurs}
\subsubsection{Transformation}
On va essayer de suivre l'intuition selon laquelle la théorie des catégories préserve l'ordre.
\begin{category}[]
	\left(A,\leq_{A}\right)\arrow[bend left, "g" name=U, rr]\arrow[bend right, rr, "f" {swap, name=D}] & & \left(B, \leq_{B}\right)\arrow[to path={([yshift=.1cm]D.north) -- ([yshift=-.1cm]U.south)\tikztonodes}, "\rotatebox{90}{$\leq$}" description, phantom]
\end{category}
On a alors $f\leq g \Leftrightarrow \forall a \in A, f a \leq g a$.

On va essayer de généraliser cette définition. On se donne deux foncteurs $F, G$ de $\A$ dans $\B$ et on va définir une transformation point à point de $F$ vers $G$:
\begin{definition}
	Une transformation $\theta: F \Rightarrow G$ est une famille $\left(\theta_{A}: FA \to GA\right)_{A \in \mathrm{Obj}\A}$ de flèches de $\B$ indicée par les objets de $\A$.
	On note ceci:
	\begin{category}[]
		\A\arrow[bend left, "G" name=U, rr]\arrow[bend right, "F" {swap, name=D}, rr] & & \B\arrow[Rightarrow, to path={([yshift=.1cm]D.north) -- ([yshift=-.1cm]U.south)\tikztonodes}, "\theta"]
	\end{category}
	\label{def:transformation}
\end{definition}

\begin{definition}
	La catégorie $\mathrm{Trans}(\A, \B)$ a pour objet les foncteurs $\A \xrightarrow{F} \B$ et pour flèches les transformations $\theta: F \Rightarrow G$.
	\begin{itemize}
		\item La transformation $\id_{F}: F\Rightarrow F$ est définie par $\id_{F} = \left(F A \xrightarrow{\id_{FA}} FA\right)_{A\in \mathrm{Obj}\A}$
		\item La transformation $\psi \cdot \phi: F\Rightarrow H$ composée de $\phi: F\Rightarrow G$ et $\psi: G\Rightarrow H$ telle que: $\left(\psi\cdot\phi\right)_{A} = \psi_{A}\circ_{\B}\phi_{A}$.
	\end{itemize}
	\label{def:transcat}
\end{definition}

\subsubsection{Action à Gauche de Post-Composition}
Supposons qu'on ait la situation suivante:
\begin{category}[]
	\A\arrow[bend left, "G" name=U, rr]\arrow[bend right, "F" {swap, name=D}, rr] & & \B\arrow[Rightarrow, to path={([yshift=.1cm]D.north) -- ([yshift=-.1cm]U.south)\tikztonodes}, "\theta"]\arrow[r, "H"] &\cont
\end{category}
où $\A, \B, \cont$ sont des catégories, $F, G: \A \to \B$ et $H: \B \to \cont$ sont des foncteurs et $\theta: F\rightarrow G$ est une transformation.

\begin{definition}
	La transformation (dite d'action à gauche) $H \circ_{L} \theta: H\circ F \Rightarrow H\circ G$ est définie par $\left(H \circ \theta\right)_{A} = H\left(\theta_{A}\right): HFA \to HGA$
	\label{def:actiongauchetransfo}
\end{definition}
Autrement dit, une transformation est la donnée pour tout objet de la catégorie de départ d'une flèche dans la catégorie d'arrivée.

\begin{proposition}
	On a alors une série d'équations:
	\begin{enumerate}
		\item On a:
		      \begin{equation*}
			      H\circ_{L} \left(\psi \cdot \phi\right) = \left(H\circ_{L}\psi\right)\cdot \left(H\circ_{L}\phi\right)
		      \end{equation*}
		      et de même:
		      \begin{equation*}
			      H\circ_{L} \Id_{F} = \Id_{H\circ F}
		      \end{equation*}
		      Autrement dit:
		      \begin{equation*}
			      H\circ_{L} :
			      \begin{array}{rcl}
				      \mathrm{Trans}\left(\A, \B\right)                                                                                                                & \longrightarrow & \mathrm{Trans}\left(\A, \cont\right)                  \\
				      F: \A \to \B                                                                                                                                     & \longmapsto     & H\circ F: \A\to \cont                                 \\
				      \begin{tikzcd}
					      \A\arrow[bend left, "G" name=U, rr]\arrow[bend right, "F" {swap, name=D}, rr] & & \B\arrow[Rightarrow, to path={([yshift=.1cm]D.north) -- ([yshift=-.1cm]U.south)\tikztonodes}, "\theta"]
				      \end{tikzcd} & \longmapsto     & \begin{tikzcd}[column sep=large]
					                                       \A\arrow[bend left, "H\circ G" name=U, rr]\arrow[bend right, "H\circ F" {swap, name=D}, rr] & & \cont\arrow[Rightarrow, to path={([yshift=.1cm]D.north) -- ([yshift=-.1cm]U.south)\tikztonodes}, "H\circ_{L} \theta"]
				                                       \end{tikzcd}
			      \end{array}
		      \end{equation*}
		      $H \circ_{L} -$ est un foncteur. On dit que l'action est fonctorielle.
		\item On a:
		      \begin{equation*}
			      \left(H'\circ H\right)\circ_{L}\theta = H'\circ_{L}\left(H\circ_{L}\theta\right)
		      \end{equation*}
		      et de même:
		      \begin{equation*}
			      \Id_{\B}\circ_{L}\theta = \theta
		      \end{equation*}
	\end{enumerate}
	\label{prop:transfocomp}
\end{proposition}
\begin{proof}
	\begin{enumerate}
		\item La première propriété est immédiate par la composition des foncteurs.
		\item On a:
		      \begin{equation*}
			      \begin{aligned}
				      \left( \left( H'\circ H \right) \circ_{L} \theta \right)_{A\in \Obj\A} = & H'\circ H\left(\theta_{A}: FA\to GA\right)                                \\
				      =                                                                        & H'\left(H\theta_{A}\right)                                                \\
				      =                                                                        & H'\circ \left(H\circ \theta_{A}\right)                                    \\
				      =                                                                        & \left( H'\circ_{L}\left( H \circ_{L} \theta \right) \right)_{A\in \Obj\A}
			      \end{aligned}
		      \end{equation*}
		      D'où la deuxième propriété.
	\end{enumerate}
\end{proof}

\subsubsection{Action à droite de Pré-Composition}
On suppose qu'on à:
\begin{category}[]
	\A\arrow[r, "H"] & \B\arrow[bend left, rr, "G" name=U]\arrow[bend right, rr, "F"{swap, name=D}] & & \cont\uuarrow["\theta"]{D}{U}
\end{category}

Ceci permet de définir une transformation, dite d'action à droite:
\begin{definition}
	La transformation (d'action à droite) $\theta \circ_{R} H : F\circ H \Rightarrow G\circ H$ est définie par:
	$\left(\theta\circ_{R} H \right)_{C \in \Obj\cont} = \theta_{HC}$.
	\label{def:actiondroitetransfo}
\end{definition}

\begin{proposition}
	$\circ_{H}$ définit un foncteur:
	\begin{equation*}
		\begin{array}[]{rcl}
			\mathrm{Trans}\left(\A, \B\right) & \longrightarrow & \mathrm{Trans}\left(\A, \cont\right) \\
			                                  &                 &                                      \\
		\end{array}
	\end{equation*}
	Si on a:
	\begin{category}[column sep=huge]
		\cont\ar[r, "H"] & \A\arrow[r, bend left=50, "G" name=C]\arrow[r, "F" {description, name=B}]\arrow[r, bend right=50, "E" {swap, name=A}]\arrow[Rightarrow, to path={([yshift=.1cm]A.north) -- ([yshift=-.1cm]B.south)\tikztonodes}, "\theta_{1}"]\uuarrow["\theta_{2}"]{B}{C} & \B
	\end{category}
	Alors $\left(\theta_{2}\circ_{R} H \right) \cdot \left( \theta_{1}\circ_{R} H \right) = \left(\theta_{2}\cdot \theta_{1}\right)\circ_{R} H$
	De même, on a:
	\begin{equation*}
		\id_{F}\circ_{R} H = \id_{F\circ H}
	\end{equation*}
	\label{prop:actiondroiteequations}
\end{proposition}

\begin{proposition}
	Les actions à gauche et à droite sont compatibles au sens où:
	\begin{category}[]
		\A' \ar[r, "H_{\A'}"] & \A\ar[r, bend left, "G" name=B]\ar[r, bend right, "F" {swap, name=A}]\uuarrow["\theta"]{A}{B} & \B\ar[r, "H_{B}"] & \B'
	\end{category}
	En particulier:
	\begin{equation*}
		\left(H_{\B} \circ_{L}\theta \right)\circ_{R} H_{\A} = H_{\B}\circ_{L}\left(\theta \circ_{R} H_{\A} \right)
	\end{equation*}
	cette transformation étant définie en $A'\in \mathrm{Obj}\A'$ par:
	\begin{equation*}
		H_{\B}\left(\theta_{H_{\A}A'}\right): H_{\B} FH_{\A}A'\to H_{\B}GH_{\A}A'
	\end{equation*}
	Ces équations assurent que tout diagramme de la forme:/
	\begin{category}[]
		\A'''\ar[r] & \A''\ar[r]  &\A' \ar[r, "H_{\A'}"] & \A\ar[r, bend left, "G" name=B]\ar[r, bend right, "F" {swap, name=A}]\uuarrow["\theta"]{A}{B} & \B\ar[r, "H_{B}"] & \B'\ar[r] & \B''\ar[r] & \B'''
	\end{category}
	définit une transformation de manière unique.
	\label{prop:moustache}
\end{proposition}

\begin{proposition}
	Toutefois, si on se donne deux transformations:
	\begin{category}[]
		\A\ar[r, bend left=50, "G_{1}" name=B1]\ar[r, bend right=50, "F_{1}" {swap, name=A1}]\uuarrow["\theta_{1}"]{A1}{B1} & \B\ar[r, bend left=50, "G_{2}" name=B2]\ar[r, bend right=50, "F_{2}" {swap, name=A2}]\uuarrow["\theta_{2}"]{A2}{B2} & \cont
	\end{category}
	on a deux manières de composer, qui donnent en général des transformations différentes.
	\begin{category}[arrows=Rightarrow]
		G_{2} \circ G_{1} & & G_{2} \circ G_{1}\\
		F_{2} \circ G_{1}\arrow[u, "\theta_{2} \circ_{R} G_{1}"] & & G_{2}\circ F_{1}\arrow[u, "G_{2}\circ_{L} \theta_{1}"]\\
		F_{2}\circ F_{1} \arrow[u, "F_{2}\circ_{L}\theta_{1}"] & & F_{2}\circ F_{2} \arrow[u, "\theta_{2}\circ_{R} F_{1}"]
	\end{category}
	\label{prop:bimoustache}
\end{proposition}
\begin{proof}
	On considère les catégories $\A = \term$ à un élément, $\B$ définie par:
	\begin{category}
		1 \\ 0\arrow[u]
	\end{category}
	et $\cont$ définie par le diagramme non commutatif suivant:
	\begin{category}
		b\arrow[r, "g'"] & d\\
		a\arrow[u, "g"]\arrow[ur, phantom, "\neq"]\arrow[r, "f"'] & c\arrow[u, "f'"']
	\end{category}
	On considère alors le diagramme suivant:
	\begin{category}[]
		& 1\arrow[rr, "G_{2}" name=B2] & & b\arrow[r, "g'"] & d\\
		\mathds{1}\arrow[ur, bend left, "G_{1}" {description, name=B1}]\arrow[dr, bend right, "F_{1}" {description, name=A1}]\uuarrow["\theta_{1}"']{A1}{B1} & & & & \\
		& 0\arrow[uu, "j"]\arrow[rr, "F_{2}" {name=A2, swap}]\uuarrow["\theta_{2}"]{A2}{B2} & & a\arrow[uu, "g"]\arrow[r, "f"'] & c\arrow[uu, "f'"']\\
		\A & \B & & \cont
	\end{category}
	On pose:
	\begin{align*}
		\theta_{1}(\mathds{1}) = j            \\
		F_{2}(0) = a, G_{2}(0) = c            \\
		F_{2}(j) = g, G_{2}(j) = f'           \\
		\theta_{2}(0) = f, \theta_{2}(1) = g' \\
	\end{align*}
\end{proof}

Les propriétés et équations des actions définissent une sesquicatégorie des catégories, foncteurs et transformations.

\begin{definition}
	Une transformation $\theta: F\Rightarrow G$ est dite naturelle lorsque le diagramme suivant commute:
	\begin{category}
		GA\arrow[r, "Gf"] & GA'\\
		FA\arrow[u, "\theta_{A}"]\arrow[r, "Ff"'] & FA'\arrow[u, "\theta_{A'}"']
	\end{category}
	pour toute flèche $f$ de la catégorie $\A$.
	\label{def:transformationnaturelle}
\end{definition}

\begin{definition}[Catégorie des Transformations Naturelles]
	La transformation $\id_{F}$ est naturelle:
	\begin{equation*}
		\id_{F} : F \Rightarrow F, \left(\id_{F}\right) = \id_{FA}
	\end{equation*}
	On note $\mathrm{Nat}(\A, \B)$ la catégorie dont les objets sont les foncteurs $F: \A \to \B$ et dont les flèches sont les transforamtions naturelles.
	\label{prop:categorietransnat}
\end{definition}

\begin{proposition}
	La composée verticale de deux transformations naturelles est une transformation naturelle:
	\begin{category}[column sep=large]
		\A\arrow[r, bend left=75, "H" name=C]\arrow[r, "G" {description, name=B}]\arrow[r, bend right=75, "F" {swap, name=A}]\arrow[Rightarrow, to path={([yshift=.1cm]A.north) -- ([yshift=-.1cm]B.south)\tikztonodes}, "\psi"]\uuarrow["\phi"]{B}{C} & \B
	\end{category}
	\label{prop:compositionnaturelle}
\end{proposition}
\begin{proof}
	Le diagramme suivant commute:
	\begin{category}
		HA\ar[r, "Hf"] & HA'\\
		GA\ar[u, "\psi_{A}"]\ar[r, "Gf"] & GA'\ar[u, "\psi_{A'}"']\\
		FA\ar[u, "\phi_{A}"]\ar[r, "Ff"] & FA'\ar[u, "\phi_{A'}"']
	\end{category}
\end{proof}

\begin{proposition}
	Les actions à gauche et à droite d'un foncteur préservent la naturalité des transformations.
	\label{prop:actionetnaturalité}
\end{proposition}
\begin{proof}
	Tout foncteur $H : \B \to \B'$ définit un foncteur
	\begin{equation*}
		H\circ_{L}: \mathrm{Nat}(\A, \B) \to \mathrm{Nat}(\A, \B')
	\end{equation*}
	Tout foncteur $H: \A'\to \A$ définit un foncteur
	\begin{equation*}
		\circ_{R} H: \mathrm{Nat}(\A, \B) \to \mathrm{Nat}(\A', \B)
	\end{equation*}
\end{proof}

\begin{proposition}
	Si $\theta_{1}, \theta_{2}$ sont des transformations naturelles:
	\begin{category}[]
		\A\ar[r, bend left=50, "G_{1}" name=B1]\ar[r, bend right=50, "F_{1}" {swap, name=A1}]\uuarrow["\theta_{1}"]{A1}{B1} & \B\ar[r, bend left=50, "G_{2}" name=B2]\ar[r, bend right=50, "F_{2}" {swap, name=A2}]\uuarrow["\theta_{2}"]{A2}{B2} & \cont & & \text{"Higher pasting diagram"}
	\end{category}
	alors les transformations naturelles "$\theta_{1}$ puis $\theta_{2}$" et "$\theta_{2}$ puis $\theta_{1}$" coïncident.
	\label{prop:bimoustachenaturelle}
\end{proposition}

\begin{vocabulary}
	$\theta_{2} \circ \theta_{1}$ désigne la transformation naturelle obtenue de la composition horizontale de
	transformations naturelles
\end{vocabulary}

\begin{definition}
	Une $2$-catégoprie est une sesquicatégorie où la loi \ref{prop:bimoustachenaturelle} est satisfaite.
	\label{def:2catégorie}
\end{definition}

\begin{thm}
	Les catégories, foncteurs et tranformations naturelles définissent une $2$-catégorie.
\end{thm}

\begin{exemple}
	On réétudie la catégorie $\mathbb{G}$:
	\begin{category}[]
		1\arrow[loop left, "\id_{1}"]\arrow[dd, shift left,"s"]\arrow[dd, shift right,"t" swap] & & \\
		& \mathbb{G} \arrow[r, bend left=20, "G" name=B]\arrow[r, bend right=20, "F"' name=A] \uuarrow["\theta"]{A}{B}& \mathrm{Set}\\
		0\arrow[loop left, "\id_{0}"] & &
	\end{category}
	Ici, $F$ et $G$ définissent deux graphes $\scalar{F}$ et $\scalar{G}$.
	\begin{category}
		\text{L'ensemble des sommets de $\scalar{F}$ } FV \ar[r, "\theta_{V}"] & GV \text{ L'ensemble des sommets de } \scalar{G} \\
		\text{L'ensemble des arêtes de $\scalar{F}$ } FE \ar[r, "\theta_{E}"] & GE \text{ L'ensemble des arêtes de } \scalar{G}
	\end{category}
	Une transformation $\theta \in \mathrm{Trans}\left(\mathbb{G}, \mathrm{Set}\right)$ définit deux fonctions.
	\begin{proposition}
		Un homomorphisme de graphe:
		\begin{equation*}
			\scalar{F} \to \scalar{G}
		\end{equation*}
		est la même chose qu'une transformation naturelle:
		\begin{equation*}
			\theta: F \Rightarrow G
		\end{equation*}
		\label{prop:homographenaturel}
	\end{proposition}
	\begin{proof}
		On a deux diagrammes:
		\begin{category}
			FE\ar[d, "Fs"]\ar[r, "\theta_{E}"]\ar[dr, phantom, "1"] & GE\ar[d, "Gs"] & & FE\ar[r, "\theta_{E}"]\ar[d, "Ft"]\ar[dr, phantom, "2"] & GE\ar[d, "Gt"]\\
			FV\ar[r, "\theta_{V}"] & GV & & FV\ar[r, "\theta_{V}"] & GV
		\end{category}
		Le fait que $1$ et $2$ commutent signifie que \textit{l'image de la source est la source de l'image}.
	\end{proof}
\end{exemple}


\section{Diagrammes de Corde pour 2-Catégories}
\subsection{$2$-Catégories}
\begin{definition}
	Le produit $\A \times \B$ de deux catégories est la catégorie dont les objets sont les paires d'objets, les flèches sont les paires de flèches et la composition se fait point à point:
	\begin{category}[]
		%		\left(A, B\right)\arrow[r, "\left(f, g \right)"]\dbarrow[rr, "\left(f'\circ f, g'\circ g \right)"'] & \left(A_{1}, B_{1}\right)\arrow[r, "\left(f', g' \right)"] & \left(A_{2}, B_{2} \right)
	\end{category}
	\label{def:prod}
\end{definition}

\begin{definition}[Définition équivalente de $2$-catégorie]
	Une $2$-catégorie $\mathcal{W}$ est la donnée:
	\begin{enumerate}
		\item[0] D'une classe d'objets (ou $0$-cellules)
		\item[1] Pour toute paire d'objets $A, B$ d'une catégorie $\Hom\left(A, B\right)$
		      Notation:
		      \begin{category}
			      A\ar[r, "f" name=A, bend left]\ar[r, "g"' name=B, bend right]\ddarrow["\theta"]{A}{B} & B
		      \end{category}
		\item[2] Pour tout triplet d'objets $A, B, C$ un foncteur:
		      \begin{equation*}
			      \Hom\left(A, B \right)\times \Hom\left(B, C \right) \to \Hom\left(A, C\right)
		      \end{equation*}
		      \begin{category}[]
			      \B\ar[r, bend left=50, "f" name=A1]\ar[r, bend right=50, "g" {swap, name=B1}]\ddarrow["f"]{A1}{B1} & \A\ar[r, bend left=50, "f'" name=A2]\ar[r, bend right=50, "g'" {swap, name=B2}]\ddarrow["\phi'"]{A2}{B2} & \cont & \longmapsto & A\ar[r, bend left, "f'\circ f" name=A3]\ar[r, bend right, "g'\circ g"' name=B3]\ddarrow["\phi'\circ \phi"]{A3}{B3} &[2cm] C
		      \end{category}
		\item[2] Une identité $\id_{A}: A\to A$
		\item[3] Associativité et Neutralité:
		      \begin{category}[labels=description]
			      &\Hom(C, D) \times \Hom(B, C) \times \Hom(A, B)\ar[dl, "\circ_{BCD}\times \id_{\Hom(A, B)}"'] \ar[dr, "\id_{\Hom(C, D)} \times\circ_{ABC}"]&\\
			      \Hom(B, D) \times \Hom(A, B)\ar[dr, "\circ_{ABD}"']& & \Hom(C, D) \times \Hom(A, C)\ar[dl, "\circ_{ACD}"]\\
			      & \Hom(A, D)&
		      \end{category}

	\end{enumerate}
	Un objet $f$ de $\Hom(A, B)$ est appelé une flèche ou $1$-cellule et notée $f: A\to B$.
	Une flèche $\theta : f\to g$ de $\Hom(A, B)$ est appelée $2$-cellule et notée:
	\begin{category}[]
		A\ar[r, "f" name=A, bend left]\ar[r, "g"' name=B, bend right]\ddarrow["\theta"]{A}{B} & B
	\end{category}
	\label{def:2categorie}
\end{definition}

\begin{exemple}[Espaces Topologiques] Si on définit sur $\mathcal{T}op$ la flèche $\theta: f \to g$
	\begin{category}[]
		A\ar[r, "f" name=A, bend left]\ar[r, "g"' name=B, bend right]\ddarrow["\theta"]{A}{B} & B
	\end{category}
	comme une fonction continue: $\theta: \left[0, 1 \right]\times A \to B$ telle que:
	\begin{equation*}
		\forall a \in A, \begin{cases}
			\theta\left(0, a \right) & = f(a) \\
			\theta\left(1, a \right) & = g(a) \\
		\end{cases}
	\end{equation*}
	on définit une $2$-catégorie.
\end{exemple}

\begin{remarque}
	Une transformation naturelle $\theta : f\to g$ de $\Hom(A, B)$:
	\begin{category}[]
		A\ar[r, "f" name=A, bend left]\ar[r, "g"' name=B, bend right]\ddarrow["\theta"]{A}{B} & B
	\end{category}
	est la même chose qu'un foncteur:
	\begin{category}
		A \times 2 \ar[r, "H"] & B
	\end{category}
	où $2 = \left(0 \to 1\right)$ telle que: $H\left(-, 0 \right) = F$ et $H\left(-, 1 \right) = G$.
\end{remarque}

\subsection{Diagrammes de Cordes}
L'idée fondamentale derrière les diagrammes $2$-catégoriques: On représente une $2$-cellule comme le sommet
\begin{category}[]
	& & B\ar[rr, "g"]\ar[Rightarrow, dd, "\theta"] & & C\\
	A\ar[urr, bend left, "f"]\ar[drr, bend right, "h"'] & &  & &  \\
	& & D\ar[rr, "j"'] & & E \ar[uu, "k"', bend right]
\end{category}
\begin{category}
	k\circ j\circ h\\
	g\circ f\ar[u, Rightarrow, "\theta"']
\end{category}
\begin{category}
	k\ar[dr, no head, "E" color=blue] & j\ar[d, "D" color=blue, no head] & h\ar[dl, no head, "A" color=blue]\\
	& \theta &\\
	g\ar[ur, no head, "C" color=blue] & & f\ar[ul, no head, "B" color=blue]
\end{category}
C'est le dual de poincaré du diagramme précédent.
\begin{category}[yscale=-1, xscale=-1]
	k\ar[dr, no head, "E" color=blue] & j\ar[d, "D" color=blue, no head] & h\ar[dl, no head, "A" color=blue]\\
	& \theta &\\
	g\ar[ur, no head, "C" color=blue] & & f\ar[ul, no head, "B" color=blue]
\end{category}
\begin{itemize}
	\item $\theta$ dimension $2$ donne un noeud de dimension $0$
	\item $f, g$ dimension $1$ donnent de cordes de dimension $1$
	\item $A, B$ dimension $0$ donnent des zones de dimension $2$.
\end{itemize}

Pour représenter l'action à gauche:
\begin{center}
	\hfill
	\begin{minipage}{.3\textwidth}
		\begin{category}[]
			\A\arrow[bend left, "G" name=U, rr]\arrow[bend right, "F" {swap, name=D}, rr] & & \B\arrow[Rightarrow, to path={([yshift=.1cm]D.north) -- ([yshift=-.1cm]U.south)\tikztonodes}, "\theta"]\arrow[r, "H"] &\cont
		\end{category}
	\end{minipage}
	\hfill
	\begin{minipage}{.3\textwidth}
		On donne le diagramme de cordes suivant:
		\begin{category}
			\text{ } & g\\
			& \theta\ar[u, no head] \\
			h\ar[uu, no head]\ar[uu, phantom, "C" color=blue, shift left=.5cm] & f\ar[u, no head]\ar[uu, phantom, "A"' color=blue, shift right=.5cm]
			\ar[uu, phantom, "B" color=blue, shift left=.5cm]
		\end{category}
	\end{minipage}
	\hfill
	\begin{minipage}{.3\textwidth}
		Pour ce qui est de l'action à droite, de manière similaire:
		\begin{category}[xscale=-1]
			g & \text{ } \\
			\theta\ar[u, no head] & \\
			f\ar[u, no head]\ar[uu, phantom, "A"' color=blue, shift right=.5cm]
			\ar[uu, phantom, "B" color=blue, shift left=.5cm] &h\ar[uu, no head]\ar[uu, phantom, "C" color=blue, shift left=.5cm]
		\end{category}
	\end{minipage}
	\hfill
\end{center}
Pour la bimoustache:
\begin{center}
	\begin{minipage}{.45\textwidth}
		\begin{category}[]
			\A\ar[r, bend left=50, "f_{1}" name=B1]\ar[r, bend right=50, "g_{1}" {swap, name=A1}]\ddarrow["\theta_{1}"]{B1}{A1} & \B\ar[r, bend left=50, "f_{2}" name=B2]\ar[r, bend right=50, "g_{2}" {swap, name=A2}]\ddarrow["\theta_{2}"]{B2}{A2} & \cont
		\end{category}
	\end{minipage}
	\begin{minipage}{.45\textwidth}
		\begin{category}[]
			g_{2} & g_{1}\\
			\theta_{2}\ar[u, no head] & \theta_{1}\ar[u, no head]\\
			f_{2}\ar[u, no head]\ar[uu, phantom, "C" color=blue, shift left=.5cm] & f_{1}\ar[u, no head]\ar[uu, phantom, "A"' color=blue, shift right=.5cm]	\ar[uu, phantom, "B" color=blue, shift left=.5cm]
		\end{category}
	\end{minipage}
\end{center}
Ainsi, la composition verticale (composition dans $\Hom(A, C)$) peut se représenter en diagramme de cordes:
\begin{center}
	\begin{minipage}{.45\textwidth}
		Le diagramme:
		\begin{category}
			g_{2} & g_{1}\\
			\theta_{2}\ar[u, no head] & \\
			& \theta_{1}\ar[uu, no head]\\
			f_{2}\ar[uu, no head] & f_{1}\ar[u, no head]
		\end{category}
		est une représentation de \og$\theta_{1}$ puis $\theta_{2}$\fg
	\end{minipage}
	\begin{minipage}{.45\textwidth}
		Le diagramme:
		\begin{category}
			g_{2} & g_{1}\\
			& \theta_{1}\ar[u, no head]\\
			\theta_{2}\ar[uu, no head] & \\
			f_{2}\ar[u, no head] & f_{1}\ar[uu, no head]
		\end{category}
		est une représentation de \og$\theta_{2}$ puis $\theta_{1}$\fg
	\end{minipage}
\end{center}

\section[Lambda-Calcul Simplement Typé]{$\lambda$-Calcul Simplement Typé}
L'idée du $\lambda$-calcul introduit par Church est de définir un calcul symbolique des fonctions.
On se donne un ensemble infini $Var$ de variables.
On définit les termes du \lambdacalcul de manière inductive:
\begin{table}[h!]
	\centering
	\begin{grammar}
		\firstrule{E}{$x \in Var$}{Variables}
		\grule{$App(E, E)$}{Application}
		\grule{$\lambda x.E$}{Évaluation}
	\end{grammar}
	\caption{Termes du \lambdacalcul}
\end{table}
Si $x$ est une variable, c'est un lambda terme.
Si $M, N$ sont des lambdas termes, $MN$ ou $App(M, N)$ (la composition de fonction) est un lambda-terme.
Si $x \in Var$ et $M$ est un lambda terme, $\lambda x.M$ est la fonction qu'on écrirait $x \mapsto M(x)$.

Une des difficultés de cette explication est l'$\alpha$-conversion, que nous devrons définir de telle sorte à identifier des $\lambda$-termes tels que $\lambda x.x$ et $\lambda y.y$.

\subsection{La notion d'occurence}
\begin{definition}
	Une occurence est un mot sur l'alphabet $\left\{\tt fun, arg, body \right\}$.
	\label{def:occurence}
\end{definition}
\begin{definition}
	On définit l'ensemble $Occ(M)$ des occurences d'un $\lambda$-terme $M$ par induction structurelle sur $M$:
	\begin{center}
		\begin{mgrammar}
			\firstrule{Occ(x)}{\left\{\epsilon \right\} }{}
			\firstrule{Occ(App(M, N))}{ \left\{ \epsilon \right\} \sqcup\left\{\texttt{fun}.o\mid o\in Occ(M)\right\} \sqcup \left\{\texttt{arg}.o\mid o \in Occ(N) \right\}}{}
			\firstrule{Occ(\lambda x.M)}{\{\epsilon\}\sqcup \left\{\texttt{body}.o\mid o\in Occ(M) \right\}}{}
		\end{mgrammar}
	\end{center}
	\label{def:occ}
\end{definition}

\begin{exemple}[Codage des Entiers de Church]
	Les trois arbres ci-dessous sont les représentations dans le codage des entiers de Church de $0$, de $1$ et de $2$.
	\begin{center}
		\Tree [.$\lambda f$ [.$\lambda z$ [.$z$ ] ] ]
		\Tree [.$\lambda f$ [.$\lambda z$ [.$App$ [.$f$ ] [.$z$ ] ] ] ]
		\Tree [.$\lambda f$ [.$\lambda z$ [.$App$ [.$f$ ] [.$App$ [.$f$ ] [.$z$ ] ] ] ] ]
	\end{center}
	Pour $2$, on a par exemple:
	\begin{equation*}
		Occ(M) = \left\{ \tt \epsilon, body, bodybody, bodybodyfun, bodybodyarg\right\}
	\end{equation*}
\end{exemple}

\begin{definition}
	On définit $VarOcc(M)$ l'ensemble des occurences de variables:
	\begin{center}
		\begin{mgrammar}
			\firstrule{VarOcc(x)}{\{\epsilon\}}{}
			\firstrule{VarOcc(App(M, N))}{\texttt{fun}.VarOcc(M) + \texttt{arg}.VarOcc(N)}{}
			\firstrule{VarOcc(\lambda x.M)}{\texttt{arg}.VarOcc(M)}{}
		\end{mgrammar}
	\end{center}
	\label{def:varocc}
\end{definition}

\begin{proposition}
	$VarOcc(M)$ coïncide avec l'ensemble des mots maximaux pour l'ordre préfixe dans $Occ(M)$.
	\label{prop:varoccegalmaxocc}
\end{proposition}

\begin{definition}
	On définit $LamOcc(M)$ l'ensemble des occurences d'un lieur $\lambda$ dans $M$.
	\begin{center}
		\begin{mgrammar}
			\firstrule{LamOcc(x)}{\emptyset}{}
			\firstrule{LamOcc(App(M, N))}{\texttt{fun}.LamOcc(M) + \texttt{arg}.LamOcc(N)}{}
			\firstrule{LamOcc(\lambda x.M)}{\texttt{body}.LamOcc(M)} + \{\epsilon\}{}
		\end{mgrammar}
	\end{center}
	\label{def:lamocc}
\end{definition}

\begin{definition}
	On définit une fonction $\mathrm{Lieur} : VarOcc\left(M\right) \to Occ(M) + Var, o\mapsto x$.
	On dira qu'une occurence de variable est \emph{libre} lorsque $\mathrm{Lieur}_{M}(o) \in Var$, \emph{liée} sinon
	La fonction $\mathrm{Lieur}_{M}$ est définie par induction:
	\begin{equation*}
		Lieur(x): \epsilon \mapsto x \in Var, VarOcc(x) = \{\epsilon\}
	\end{equation*}
	Intuition: $x \models x$ où le premier désigne le contexte de variable et le second est un $\lambda$-terme.
	\begin{center}
		\begin{mgrammar}
			\firstrule{\mathrm{Lieur}(x)}{\epsilon \mapsto x}{}
			\firstrule{\mathrm{Lieur}\left(App(M, N)\right)}{\applic{VarOcc(App(M, N))}{Occ(App(M, N)) + Var}{fun\cdot occ}{\begin{cases}
						fun\cdot \mathrm{Lieur}(M)(occ) & \text{si } occ \text{ est liée dans } Occ(App(M, N)) \\
						\mathrm{Lieur}(M)(occ)          & \text{sinon}
					\end{cases}}}{}
			\grule{\begin{array}{rcl}
					arg\cdot occ & \mapsto & \begin{cases}
						                         arg \cdot \mathrm{Lieur}(N)(occ) & \text{si } \mathrm{Lieur}(N)(occ) \in Occ(N) \\
						                         \mathrm{Lieur}(N)(occ)           & \text{sinon}
					                         \end{cases}
				\end{array}}{}
			\firstrule{\mathrm{Lieur}(\lambda x. M)}{\applic{VarOcc\left(\lambda x.M \right)}{Occ(\lambda x.M) + Var}{body\cdot occ}{\begin{cases}
						\epsilon                          & \text{si } \mathrm{Lieur}(M)(occ) = x\in Var \\
						body \cdot \mathrm{Lieur}(M)(occ) & \text{si } \mathrm{Lieur}(M)(occ) \in Occ(M) \\
						\mathrm{Lieur}(M)(occ)            & \text{sinon }
					\end{cases}}}{}
		\end{mgrammar}
	\end{center}
\end{definition}

\begin{definition}
	On dit que deux $\lambda$-termes $M$ et $N$ sont $\alpha$-convertibles lorsque:
	\begin{align*}
		Occ(M) = Occ(N) \\
		\mathrm{Lieur}(M) = \mathrm{Lieur}(N)
	\end{align*}
	Dans ce cas, on écrit
	\begin{equation*}
		M \equiv_{\alpha} N
	\end{equation*}
	\label{def:alphaconversion}
\end{definition}

\begin{exemple}
	\begin{description}
		\item[Identité]	On a:
		      \begin{equation*}
			      \lambda x. x \equiv_{\alpha} \lambda y . y
		      \end{equation*}
		      En effet:
		      \begin{category}
			      \phantom{·}& \phantom{·}\\
			      \lambda x\ar[u, no head]\ar[d, no head, "\texttt{body}"'] & \lambda y\ar[u, no head]\ar[d, no head] \\
			      x\ar[u, bend right] & y\ar[u, bend right]
		      \end{category}
		\item[Je sais pas lol] On a:
		      \begin{category}[]
			      &\lambda x\ar[d, no head] & & & & \lambda y\ar[d, no head] &\\
			      & App\ar[dl, no head]\ar[dr, no head] & & \equiv_{\alpha} & & App\ar[dl, no head]\ar[dr, no head]& \\
			      \lambda x\ar[d, no head] & & x & & \lambda z\ar[d], no head & & y\\
			      x & & & & z & &
		      \end{category}

		\item[C'est pareil] On a:
		      \begin{category}
			      \lambda x\ar[d, no head] & & \lambda x\ar[d, no head]\\
			      \lambda x\ar[d, no head] &\equiv_{\alpha}& \lambda y\ar[d, no head]\\
			      x\ar[u, bend left] & & y\ar[u, bend right]
		      \end{category}
	\end{description}
\end{exemple}

\begin{remarque}
	$\mathrm{Lieur}(M)$ associe à une occurence $occ \in VarOcc(M)$ d'une variable $x$ dans $M$ ou bien $x \in Var$ (cas libre) ou bien l'occurence maximale d'un préfixe de $occ$ étiqueté par $\lambda x$ (cas lié).
\end{remarque}

\begin{definition}
	On définit le \lambdaterme $M_{\mid o}$ pour $o \in Occ(M)$, par induction sur $M$:
	\begin{center}
		\begin{mgrammar}
			\firstrule{x_{\mid \epsilon}}{x}{}
			\firstrule{App(M, N)_{\mid \epsilon}}{App(M, N)}{}
			\firstrule{App(M, N)_{\mid \texttt{fun}\cdot occ}}{M_{\mid occ}}{}
			\firstrule{App(M, N)_{\mid \texttt{arg}\cdot occ}}{N_{\mid occ}}{}
			\firstrule{\left(\lambda x. M\right)_{\mid \epsilon}}{\lambda x. M}{}
			\firstrule{\left(\lambda x. M\right)_{\mid \tbody\cdot occ}}{M_{\mid occ}}{}
		\end{mgrammar}
	\end{center}
	\label{def:presubstit}
\end{definition}

\begin{definition}
	Si $M, N$ sont des \lambdatermes et $x \in Var$, on définit $M[x \coloneqq N]$ par induction sur $M$, à $\alpha$-conversion près:
	\begin{center}
		\begin{mgrammar}
			\firstrule{x[x\walrus N]}{N}{}
			\firstrule{y[x\walrus N]}{y}{si $y \neq x$}
			\firstrule{App(P, Q)[x\walrus N]}{App(P[x\walrus N], Q[x\walrus N])}{}
			\firstrule{\sub{\left(\lambda y. M \right)}{x}{N}}{\lambda y.\left(\sub{M}{x}{N} \right)}{si $y \neq x$ et $y$ n'est pas libre dans $N$}
			\firstrule{\sub{\left(\lambda x. M\right)}{x}{N}}{\lambda z. \sub{M'}{x}{N}}{}
		\end{mgrammar}
	\end{center}
	Dans le dernier cas, on a choisi $\lambda z. M' \equiv_{\alpha} \lambda x. M$ avec $z \neq x$ et $z$ n'est pas libre dans $N$.
	\label{def:substitution}
\end{definition}

\begin{proposition}
	La classe de $\alpha$-équivalence de $\sub{M}{x}{N}$ ne dépend pas des choix faits dans le cas $M = \lambda x. P$.
	De plus, si $M' \equiv_{\alpha} M$ et $N' \equiv_{\alpha} N$, alors $\sub{M}{x}{N} = \sub{M'}{x}{N'}$.
	\label{prop:classesubstitution}
\end{proposition}
\begin{proof}
	On a $\sub{\left(\lambda x. M\right)}{x}{N} = \lambda x. M$.
	On a:
	\begin{equation*}
		Occ(\sub{M}{x}{N}) + \left\{occ_{x} \cdot occ\ \middle|\ \mathrm{Lieur}(M)(occ_{x}) = x \text{ et } occ\in Occ(N)\right\}
	\end{equation*}
	Par ailleurs:
	\begin{equation*}
		VarOcc(\sub{M}{x}{N}) = VarOcc(M) \setminus \left\{occ_{x} \mid \mathrm{Lieur}(M)(occ_{x}) = x \right\} \cup \left\{occ_{x} \mid \mathrm{Lieur}(M)(occ_{x}) = x\right\}\cdot VarOcc(N)
	\end{equation*}
	La fonction $\mathrm{Lieur}\left(\sub{M}{x}{N}\right)$ est définie comme suit:
	\begin{enumerate}
		\item Si $occ_{y} \in VarOcc(M)$ alors $\mathrm{Lieur}\left(\sub{M}{x}{N} \right)(occ_{y}) = \mathrm{Lieur}(M)(occ_{y})$
		\item Si $occ_{y} = occ_{x} \cdot occ_{y}'$ pour $occ_{x} \in VarOcc(M)$ telle que $\mathrm{Lieur}(M)(occ_{x}) = x$, alors $\mathrm{Lieur}\left(\sub{M}{x}{N}\right)(occ_{y}) = occ_{x}\cdot \mathrm{Lieur}(N)(occ_{y}')$ si $\mathrm{Lieur}(N)(occ_{y}') \in Occ(N)$, $\mathrm{Lieur}(N)(occ_{y}') \in Var$ sinon.
	\end{enumerate}
	Cela montre que $\sub{M}{x}{N}$ ne dépend pas du choix de $M$ et $N$ dans la classe d'équivalence à $\alpha$-équivalence.
\end{proof}

\subsection[Betared et Etaexp]{\betared et \etaexp}
\begin{definition}
	La règle de \betared:
	\begin{equation*}
		\left(\lambda x.M \right) N \longrightarrow \sub{M}{x}{N} \text{\hspace{1cm} \parbox{.5\textwidth}{sur les classes d'équivalence à $\alpha$-conversion près}}
	\end{equation*}
	La règle d'\etaexp:
	\begin{equation*}
		M \longrightarrow \lambda x. App(M, x)
	\end{equation*}
	\label{def:betaredetaexp}
\end{definition}

\begin{definition}
	Une $\beta$-redex d'un \lambdaterme $M$ est une occurence $occ \in Occ(M)$ telle que $M_{\mid o}$ est de la forme $App(\lambda x . P, Q)$.
	\label{def:betaredex}
\end{definition}

\begin{definition}[Contexte]
	Un contexte est défini par induction:
	\begin{center}
		\begin{mgrammar}
			\firstrule{C}{\lambda x.C}{}
			\grule{App\left(C, N \right)}{}
			\grule{App\left(L, C \right)}{}
			\grule{id}{trou.}
		\end{mgrammar}
	\end{center}
	Si $C$ est un contexte et $M$ est un \lambdaterme $C[M]$ est défini par induction:
	\begin{center}
		\begin{mgrammar}
			\firstrule{\left(\lambda x. C \right)[M]}{\lambda x.\left(C[M] \right)}{}
			\firstrule{id[M]}{M}{}
			\firstrule{App\left(C, Q\right)[M]}{App(C[M], Q)}{}
			\firstrule{App\left(P, C\right)[M]}{App\left(P, C[M]\right)}{}
		\end{mgrammar}
	\end{center}
	\label{def:CONTEXTE}
\end{definition}

\begin{remarque}
	\begin{align*}
		\lambda x.[x] = \lambda x. x \\ \not\equiv_{\alpha} \lambda y.[x] = \lambda y. x
	\end{align*}
\end{remarque}

\begin{definition}
	On notera $\Lambda$ l'ensemble des \lambdatermes à \alphaconv près.
	\label{def:classequivlambda}
\end{definition}

\begin{remarque}
	Chaque contexte définit une fonction $\Lambda \to \Lambda$:
	\begin{align*}
		\lambda x. [-]: \applic{\Lambda}{\Lambda}{M}{\lambda x. M} \\
		App(P, [-]): \applic{\Lambda}{\Lambda}{M}{App(P, M)}       \\
		[-]: \applic{\Lambda}{\Lambda}{M}{M}
	\end{align*}
\end{remarque}

\begin{proposition}
	Pour toute occurence $occ \in Occ(M)$, il existe un contexte $C$ tel que $M = C[M_{\mid occ}]$.
	\label{prop:occcontexte}
\end{proposition}

\begin{definition}
	Une \betaredex (nouvelle définition) est un triplet $(M, o, N)$ tel que $M_{occ} = App\left(\lambda x. P, Q \right)$, $M = C[M_{\mid occ}]$ et $N = C[\sub{P}{x}{Q}]$.
	\label{def:betaredex2}
\end{definition}

\begin{vocabulary}
	On note $M \xrightarrow{u} N$ pour un \betaredex $u = \left(M, occ, N\right)$.
\end{vocabulary}

On peut avoir:
\begin{category}
	M\ar[r, bend left, "u"]\ar[r, bend right, "v"'] & N
\end{category}
\begin{exemple}
	En prenant par exemple: $\Delta = \lambda x. App(x, x)$. On a notamment $App(\Delta, P) \xrightarrow{\epsilon} App(P, P)$.
	Notamment, si on note:
	\begin{category}
		\Omega = App(\Delta, \Delta)\ar[loop right, "\epsilon"]
	\end{category}
	on a:
	\begin{category}
		App\left(\Omega, \Omega \right)\ar[loop left, "\tfun"]\ar[loop right, "\targ"]
	\end{category}
\end{exemple}
\begin{exemple}
	En posant $I = \lambda x. x$, on a \begin{tikzcd}
		I(Ia) \ar[r, bend left]\ar[r, bend right] & Ia
	\end{tikzcd}
	En effet:
	\begin{category}[]
		& App\ar[dl, no head, "\tfun"]\ar[dr, no head, "\targ"] & &\\
		\lambda x\ar[d, no head] & & App\ar[dl, no head, "\tfun"]\ar[dr, no head, "\targ"] &\\
		x & \lambda y\ar[d, no head] & & a\\
		& y & &
	\end{category}
	Peut se réduire par $\epsilon$ et par $\targ$ en:
	\begin{category}[]
		& App\ar[dl, no head]\ar[dr, no head] &\\
		\lambda z & & a\\
		z & &
	\end{category}
\end{exemple}

\section{Réécriture}
\subsection{Théorème de Confluence, $\lambda$-calculement}
\begin{thm}[de Church-Rosser (confluence)]
	Si $f: M \rrightarrow P$ et $g: M \rrightarrow Q$ sont deux chemins de \betared alors il existe un \lambdaterme $N$ et deux chemins de \betared: $f': Q \rrightarrow N$ et $g': P\rrightarrow N$:
	\begin{category}[]
		& M\ar[dl, "\forall f"']\ar[dr, "\forall G"]\arrow[dd, "\sim" description, phantom] &\\
		P\ar[dr, "\exists g'"'] & & Q\ar[dl, "\exists f'"]\\
		& N &
	\end{category}
\end{thm}
On va montrer qu'il existe un choix canonique de $N$, $f'$ et $g'$ modulo permutation en introduisant une théorie des résidus.
L'intuition des résidus c'est le calcul qui n'a pas été fait et est retardé.

\begin{proposition}
	Chaque occurence $o \in \Occ(M)$ définit une fonction:
	\begin{equation*}
		\Redex(M_{\mid o}) \to \Redex(M)
	\end{equation*}
	définie par:
	\begin{equation*}
		u = (M_{\mid o}, o_{u}) \longmapsto o\cdot u = \left(M, o\cdot o_{u} \right)
	\end{equation*}
	Cela fonctionne comme si on effectuait une translation.
	\label{prop:fonctioninduite}
\end{proposition}

\begin{definition}
	Toute \betaredex $r: M \to_{\beta} N$ induit une relation binaire $[r] \subseteq \Redex M \times \Redex N$,
	qui met en relation toute \betaredex $u \in \Redex M$ à ses résidus $v \in \Redex N$ après la réduction.
	La relation résiduelle $[r]$ est définie par induction sur les occurrences de $r = (M, o)$:
	\begin{itemize}
		\item La \betaredex $r: M = App(\lambda x.P, Q) \to_{\beta} N = \sub{P}{x}{Q}$ se réécrit à l'occurence racine $\varepsilon$.
		      Dans ce cas, on a $u [r] v$ pour $u = (M, o_{u})$ et $v = (N, o_{v})$ quand on a l'un des deux cas suivants:
		      \begin{enumerate}
			      \item Il existe $o \in \Occ(P)$ tel que $o_{u} = \tfun \cdot \tbody \cdot o$ et $o_{v} = o$.
			      \item Il existe $o \in \Occ(Q)$ et $o_{x} \in \Occ(P)$ d'une variable libre $x$ dans $P$ tels que $o_{u} = \targ \cdot o$ et $o_{v} = o_{x} \cdot o$.
		      \end{enumerate}
		\item La \betaredex $r: M = \lambda x. P \to_{\beta} N = \lambda x.Q$ a occurrence $o_{r} = \tbody \cdot o$ et est donc de la forme $r = \tbody \cdot r_{p}$ pour une \betaredex $r_{p} \in \Redex(P)$.
		      Dans ce cas, on a $u [r] v$ précisément quand $u = \tbody \cdot u_{p}$, $v = \tbody \cdot v_{q}$ et $u_{p} [r_{p}] v_{q}$.
		\item La \betaredex $r: M = App(P, Q) \to_{\beta} N = App(P', Q)$ a pour occurrence $o_{r} = \tfun \cdot r_{p}$ pour $r_{p} \in \Redex P$.
		      Dans ce cas on a $u [r] v$ précisément quand:
		      \begin{enumerate}
			      \item Et $u$ et $v$ ont la même occurrence.
			      \item $u = \tfun \cdot u_{p}$, $v = \tfun \cdot v_{p'}$ et $u_{p} [r_{p}] v_{p'}$ pour $u_{p} \in \Redex P$ et $v_{p'} \in \Redex P'$.
			      \item $u = \targ \cdot w$ et $v = \targ w$ pour $w\in \Redex Q$.
		      \end{enumerate}
		\item La \betaredex $r: M = App(P, Q) \to_{\beta} N = App(P, Q')$ a une occurrence de la forme $r = \targ \cdot r_{q}$ pour $r_{q} \in \Redex Q$.
		      Dans ce cas $u [r] v$ précisément quand:
		      \begin{enumerate}
			      \item Et $u$ et $v$ ont la même occurrence.
			      \item $u = \tfun \cdot w$ et $v = \tfun \cdot w$ pour $w \in \Redex P$.
			      \item $u = \targ \cdot u_{q}$, $v = \targ \cdot v_{q'}$ et $u_{q} [r_{q}] v_{q'}$ pour $u_{q} \in \Redex Q$ et $v_{q'} \in \Redex Q'$.
		      \end{enumerate}
	\end{itemize}
	\label{def:relationresiduelle}
\end{definition}

Ceci va nous permettre de \emph{tracer} les \betaredex:
\begin{proposition}
	Chaque chemin de réécriture $f: M\rrightarrow N$ induit une relation résiduelle:
	\begin{equation*}
		[f] \subseteq \Redex M \times \Redex N
	\end{equation*}
	défini par induction sur la longueur de $f$:
	\begin{enumerate}
		\item Quand $f$ est le chemin vide $\id_{M}: M \rrightarrow M$:
		      \begin{equation*}
			      u[\id_{M}] v \Longleftrightarrow u = v
		      \end{equation*}
		\item Quand $f$ se factorise comme $r \cdot g$ pour $r: M \to_{\beta} P$ et $g: P \rrightarrow N$:
		      \begin{equation*}
			      u [r\cdot g] v \Longleftrightarrow \exists w \in \Redex P, u [r] w \land w [g] v
		      \end{equation*}
	\end{enumerate}
	\label{prop:residuschemins}
\end{proposition}

\begin{definition}
	Un \lambdaterme raffiné est nue paire $(M, U)$ d'un \lambdaterme $M$ et d'un ensemble fini de \betaredex de $M$.
	\label{def:raffinement.}
\end{definition}
\begin{definition}
	Chaque \betaredex $v: M \to N$ induit une \betaredex de \lambdatermes raffinés $(v, U): (M, U) \to (N, U[v])$ où:
	\begin{equation*}
		U[v] = \left\{u'\in \Redex(N) \mid \exists u\in U, u[v]u' \right\}
	\end{equation*}
	Le graphe $G_{ref}$ des \lambdatermes raffinés a les \lambdatermes raffinés comme sommets et les \betaredex raffinés comme arêtes.
	Le graphe des développements $G_{dev}$ est le graphe $G_{ref}$ restreint aux \betaredex de $U$.
	Un développement de $(M, U)$ est un chemin dans le graphe des développements.
	\label{def:graphedéveloppement}
\end{definition}

\begin{proposition}[Lemme des Développements Finis]
	Il n'y a pas de chemin infini dans $G_{dev}$.
	\label{prop:cheminfini}
\end{proposition}
L'idée est d'associer un ordinal $\omega(M, U)$ a chaque \lambdaterme $(M, U)$ de telle sorte que pour chaque \betaredex raffinée, les ordinaux décroissent strictement.
Supposons qu'on se donne un poset $(S, \leq)$.
Deux multiensembles finis $M, N: S \to \N$ sont ordonnés par l'ordre multiset $M >_{mset} N$ quand il existe deux multiensembles finis $X, Y$ tels que:
\begin{equation*}
	N = \left(M\setminus X \right)\sqcup Y
\end{equation*}
et
\begin{equation*}
	\forall y \in Y, \exists x \in X, x >_{S} y
\end{equation*}
La difficulté est que le nombre de \betaredex dans $U$ peut augmenter au cours du développement, typiquement quand une \betaredex $u: App(\lambda x. App(x, x), P) \to_{\beta} App(P, P)$ est dans $U$.
On va introduire les concepts d'emboîtement et d'aggripement pour comprendre la structure des \betaredex.
\begin{definition}
	On dit que $u$ emboîte $v$ (noté $u  <_{M} v$) quand $o_{v} = o_{u} \cdot \targ\cdot o$ pour $o \in \Occ(Q)$.
	De même, on dit que $u$ aggrippe $v$ (noté $u \prec_{M} v$) quand $o_{v} = o_{u} \cdot \tfun \cdot o$ et une occurrence de la variable $x$ liée par la \betaredex $u$ apparaît dans l'argument de la \betaredex $v$.
	Autrement dit:
	\begin{itemize}
		\item $u$ emboîte $v$ quand $v$ apparaît dans l'argument de $u$
		\item $u$ aggrippe $v$ quand $v$ apparaît dans le corps de $u$ et une occurrence de variable $x$ liée par $u$ apparaît dans l'argument de $v$.
	\end{itemize}
\end{definition}
\begin{lemme}
	Considérons une \betaredex $r: M \to_{\beta} N$ et des \betaredex $u, v \in \Redex M$ et $u', v' \in \Redex N$ telles que:
	\begin{equation*}
		u[r] u' \text{ et } v[r]v'
	\end{equation*}
	Si $u' <_{N} v'$ alors ou bien $u <_{M} v$ ou bien $r\prec_{M} u$ et $r <_{M} v$.
\end{lemme}
\begin{lemme}
	Considérons une \betaredex $r: M \to_{\beta} N$ et des \betaredex $u, v \in \Redex M$ et $u', v' \in \Redex N$ telles que:
	\begin{equation*}
		u[r] u' \text{ et } v[r]v'
	\end{equation*}
	Si $u' \prec_{N} v'$, alors $u\prec_{M} v$ ou $u\prec_{M} r\prec_{M} v$.
\end{lemme}
Par ailleurs, la relation d'emboîtement est transitive, et la relation d'aggrippement ne contient pas de boucle.
\begin{definition}
	La hauteur d'aggrippement $\abs{u}_{U} \in \N$ d'une \betaredex $u$ dans un \lambdaterme raffiné $(M, U)$ est la longueur $n \in \N$ de la plus grande séquence d'aggrippements $u = u_{1} \prec_{M} \cdots \prec_{M} u_{n}$.
	\label{def:grippingheight}
\end{definition}
\begin{lemme}
	Pour une \betaredex raffinée $r : (M, U) \to_{\beta} (N, V)$ et toutes \betaredex $u \in U, v\in V$:
	\begin{equation*}
		u[r] v \Rightarrow \abs{v}_{V} \leq \abs{u}_{U}
	\end{equation*}
\end{lemme}
\begin{proof}

\end{proof}
\begin{definition}
	La profondeur d'emboîtement $\norm{u}_{U}$ d'une \betaredex est le multiensemble:
	\begin{equation*}
		\norm{u}_{U} = \scalar{\abs{v_{U}} \mid v <_{M} u}
	\end{equation*}
	des hauteurs d'aggrippement des \betaredex $v \in \Redex M$ emboîtant $u$.
	\label{def:profondeuremboitement}
\end{definition}
\begin{lemme}
	Pour une \betaredex raffinée, pour toutes \betaredex $u \in U, v\in V$:
	\begin{equation*}
		u[r] v \Rightarrow \norm{v}_{V} \leq \norm{u}_{U}
	\end{equation*}
	L'inégalité est stricte quand $r <_{M} u$.
\end{lemme}
\begin{proof}

\end{proof}

\begin{proof}
	Le multiensemble des profondeurs emboîtées $\omega(U_{i}) = \scalar{\norm{u} \mid u\in U_{i}}$ décroît strictement à chaque étape du développement $M_{1}, U_{1} \xrightarrow{u_{1}} (M_{2}, U_{2}) \xrightarrow{u_{2}} \cdots$.
	Ceci prouve le théorème.
\end{proof}

\begin{definition}
	Un développement est un ensemble fini $U \subseteq \Redex M$ de \betaredex dans $M$ défini comme une chemin $f: (M, U) \rrightarrow (N, \emptyset)$ dans le graphe des raffinements $G_{ref}$.
	On note ceci $f \propto (M, U)$.
	\label{def:développement}
\end{definition}

\begin{proposition}
	Pour toute paire de \betaredex coinitiale $u, v$, il existe un \lambdaterme $N$ et deux développements $f \propto u[v]$ et $g\propto v[u]$ complétant le diagramme carré:
	\begin{category}[]
		& M\ar["u"', dl]\ar[dr, "v"] &\\
		P\ar[dr, "g"] & & Q\ar[dl, "f"]\\
		& N &
	\end{category}
	et telles que les relations résiduelles sur les deux bords coïncident.
	\label{prop:tuiledepermutations}
\end{proposition}

\begin{definition}
	Une tuile de permutation $u\cdot f \lozenge v \cdot g$:
	\begin{category}[]
		& M\ar["u"', dl]\ar[dr, "v"]\ar[dd, "\lozenge", phantom] &\\
		P\ar[dr, "g", rightarrow] & & Q\ar[dl, "f", rightarrow]\\
		& N &
	\end{category}
	est une paire de développement $u\cdot f$ et $v\cdot g$ où $u: M\to_{\beta} P$ et $v: M\to_{\beta} Q$ sont deux \betaredex coinitiales et $f \propto u[v]$ et $g\propto v[u]$ sont des développements des résidus respectifs de $u$ et $v$.
	\label{def:tuilepermutation}
\end{definition}
\begin{exemple}
	Si on pose $I = \lambda x. x$ et $\Delta = \lambda x. xx$, on a:
	\begin{category}[]
		& (Ia)(Ib)\ar["u"', dl]\ar[dr, "v"]\ar[dd, "\lozenge", phantom] &\\
		a(Ib)\ar[dr, "g", rightarrow] & & (Ia)b\ar[dl, "f", rightarrow]\\
		& ab &
	\end{category}
	\begin{category}[]
		& \Delta(Ia)\ar["u"', dl]\ar[dr, "v"]&\\
		(Ia)(Ia)\ar[d, "v_{2}", rightarrow]\ar[r, "v_{1}"] & a(Ia)\ar[d] & \Delta a\ar[dl, rightarrow]\\
		(Ia)a\ar[r] & aa &
	\end{category}
\end{exemple}

\begin{thm}[Développements Finis]
	Si $U$ est un ensemble fini de \betaredex de $M$, alors:
	\begin{enumerate}
		\item Tous les développements de $U$ terminent.
		\item Tous deux développements de $(M, U)$ sont coinitiaux et cofinaux et définissent la même relation résiduelle.
	\end{enumerate}
\end{thm}
\begin{proof}
	On montre par induction ordinale que $f$ et $g$ sont équivalentes à permutation de tuiles près.
\end{proof}

\begin{definition}
	On dit que $f \sim^{1} g: M \rrightarrow N$ et ont dit que $f$ et $g$ sont équivalentes à une tuile de permutation près lorsque $f = d\cdot u \cdot h_{v} \cdot e$ et $g = g \cdot v \cdot h_{u} \cdot e$ et:
	\begin{category}[]
		& & R\ar[dr, "h_{v}"] & &\\
		M\ar[r, "d"] & P\ar[ur, "u"]\ar[dr, "v"]\ar[rr, phantom, "\lozenge"] & & Q\ar[r, "e"] & N\\
		& & S\ar[ur, "h_{u}"] & &
	\end{category}
	où $h_{v} \propto (R, v[u])$ et $h_{u} \propto (S, u[v])$.
	$f \sim^{1} g$ est la plus petite relation d'équivalence contenant $\sim$.
	\label{def:equivpermutation}
\end{definition}
C'est une forme de relation d'homotopie.

\subsection{Démonstration Catégorique}
\begin{definition}
	Un \lambdaterme $M$ est en forme $\beta$-normale lorsqu'il n'existe pas de \betaredex $M \xrightarrow{u} N$.
	\label{def:betanormale}
\end{definition}

\begin{corollaire}
	Si $M\rrightarrow P$ et $M \rrightarrow Q$ où $P, Q$ sont des formes $\beta$-normales alors $P = Q$.
\end{corollaire}

\def\clam{\mC_{\lambda}}
On va maintenant construire une catégorie $\mC_{\lambda}$ de \lambdatermes et de chemins de réécriture modulo permutations de telle manière que $\mC_{\lambda}$ a les sommes amalgamées.

\begin{definition}
	La somme amalgamée de deux flèches $B \xleftarrow{f} A \xrightarrow{g} C$ dans une catégorie $\mC$ est la donnée d'un objet $D$ et de deux flèches $B \xrightarrow{g'} D \xleftarrow{f'} C$ telles que
	\begin{enumerate}
		\item le diagramme suivant commute:
			\begin{category}
				A\ar[r, "f"]\ar[d, "g"']\ar[phantom, "(*)", dr] & B\ar["g'", d]\\
				C\ar[r, "f'"'] & D
			\end{category}
		\item la propriété universelle suivante est satisfaite par $(*)$ pour tout $X$ et pour toute paire de flèches $a, b$ telles que $b \circ f = c \circ g$, il existe une unique flèche $h: D \to X$ telle que le diagramme suivant commute:
			\begin{category}
				A \ar[r, "f"]\ar[d, "g"] & B\ar[bend left, ddr, "b"]\ar[d, "g'"] &\\
				C\ar[drr, "c"', bend right]\ar[r, "f'"] & D\ar[dr, "\exists! h"] &\\
				&& X
			\end{category}
	\end{enumerate}
	C'est le dual du \textit{pullback} ou \textit{produit fibré}
	\label{def:pushout}
\end{definition}

\begin{exemple}
	\begin{enumerate}
		\item Dans $Ens$:
			\begin{category}
				A\ar[r, "f"]\ar[d, "g"'] & B\ar["g'", d]\\
				C\ar[r, "f'"'] & D
			\end{category}
			où $D = (B + C)/(f = g)_{a}$ la somme disjointe de $B$ et $C$ quotientée par la relation d'équivalence $\sim$ engendrée par $fa \simeq ga$.
			On peut par exemple écrire $D = \left\{ inlb \mid b \in B \right\} \sqcup \left\{inrc \mid c \in C\right\}/\sim$.
			$f'$ et $g'$ sont les injections. Alors, dans:
			\begin{category}
				A \ar[r, "f"]\ar[d, "g"] & B\ar[bend left, ddr, "g_{b}"]\ar[d, "g'"] &\\
				C\ar[drr, "f_{c}"', bend right]\ar[r, "f'"] & D\ar[dr, "\exists! h"] &\\
				&& X
			\end{category}
			on définit $h$ par:
			\begin{equation*}
				\begin{array}{c@{\longmapsto}c}
					inlb & g_{B}(b)\\
					inrc & f_{C}(c)
				\end{array}
			\end{equation*}
		\item Dans $\mT op$ des espaces topologiques et fonctions continues a les sommes amalgamées:
			si on prend $D$ défini comme précédemment et la topologie naturelle définie sur $D$:
			\begin{center}
				$u$ est ouvert dans $D$ si et seulement si $\begin{cases}
					g'^{-1}(u) \text{ est ouvert dans }B\\
					f'^{-1}(u) \text{ est ouvert dans }C
				\end{cases}$
			\end{center}
			\begin{center}
			\begin{tikzcd}[remember picture]
				|[alias=A]|\phantom{A} \ar[r, "f"]\ar[d, "g"] & |[alias=B]|\phantom{B}\ar[bend left, ddr, "g_{X}"]\ar[d] &\\
				|[alias=C]|\phantom{C}\ar[drr, bend right, "f_{X}"']\ar[r] & |[alias=D]|\phantom{D}\ar[dr, "\exists! h"] &\\
				&& |[alias=X]|\phantom{X}
			\end{tikzcd}
			\begin{tikzpicture}[overlay, remember picture]
				\node at (A) {$*$};
				\draw (C) circle (.1cm) {};
				\node at ([xshift=-.1cm]C) {$*$};
				\draw (B) circle (.1cm) {};
				\node at ([xshift=.1cm]B) {$*$};
				\draw ([xshift=-.1cm]D) circle (.1cm) {};
				\draw ([xshift=.1cm]D) circle (.1cm) {};
				\node at (D) {$*$};
				\draw[draw=white] ([xshift=-.4cm, yshift=-.4cm]X) rectangle ++(.6cm, .6cm);
				\draw ([xshift=-.3cm, yshift=-.3cm]X) rectangle ++(.6cm, .6cm);
				\draw ([xshift=-.1cm]X) circle (.1cm) {};
				\draw ([xshift=.1cm]X) circle (.1cm) {};
			\end{tikzpicture}
			\end{center}
	\end{enumerate}
\end{exemple}

On va travailler sur une représentation algébrique des catégories par \textit{générateurs et relations}.
\begin{definition}
Supposons donné un graphe $\mathcal{G}$ et un ensemble $\mathcal{E}$ de paires $(f, g)$ de chemins de $\mathcal{G}$ de la forme:  \begin{tikzcd}
	x\ar[bend left, "f", r]\ar[bend right, "g"', r] & y
\end{tikzcd}
La catégorie $\mC = \left[ \mathcal{G}, \mathcal{E} \right]$ engendrée a pour objets les sommets de $\mathcal{G}$ et pour flèches les chemins de $\mathcal{G}$ modulo $\sim_{\mathcal{E}}$ la relation d'équivalence engendrée par $\approx_{\mathcal{E}}$.
\begin{category}
	\phantom{}\arrow[r, "d"] & \phantom{}\arrow[r, bend left, "f"]\ar[r, bend right, "g"'] & \phantom{}\ar[r, "e"] & \phantom{}
\end{category}
On définit $u \approx_{\mE} v$ lorsque $u$ et $v$ se décomposent en $u = d;f;e$ et $v = d;g;e$ pour $f, g \in \mathcal{E}$.
\end{definition}

\begin{proposition}
	La catégorie engendrée $\mathcal{C} = \left[ \mathcal{G}, \mE \right]$ satisfait la propriété universelle suivante:
	Si $\mathcal{D}$ est une catégorie et $\abs{\mathcal{D}}$ est le graphe associé, tout homomorphisme de graphe $\mathcal{G}\xrightarrow{H} \abs{\mathcal{D}}$ tel que $H(f) = H(g)$ dans $\mathcal{D}$ pour tout $f, g \in \mE$ induit un unique foncteur $\mathcal{F} : [\mathcal{G}, \mE] \to \mathcal{D}$ tel que:
	\begin{equation*}
		F(x\xrightarrow{e} y) = H(x\xrightarrow{e}y)
	\end{equation*}
	\label{prop:universelgraphefoncteur}
\end{proposition}

Autrement dit, un foncteur: $\mathcal{F}: \left[ \mathcal{G}, \mE \right] \to \mathcal{D}$ est la donnée d'un homomorphisme de graphe $H:\mathcal{G} \to \abs{\mathcal{D}}$ tel que $H(f) = H(g)$ pour tout $(f, g) \in \mE$.

\begin{exemple}
	\begin{enumerate}
		\item La catégorie $[\mG]$ engendrée par un graphe $(\mE = \emptyset)$ est la même chose qu'un homomorphisme $H : \mG \to \abs{\mD}$.
		\item Toute catégorie $\mC$ peut être présentée par le graphe $\mG = \abs{\mC}$ et les équations:
			\begin{equation*}
				\begin{aligned}
					\mE =& \left\{ \underbrace{x\xrightarrow{f} y \xrightarrow{g} z}_{\text{chemin de longueur 2}} = \underbrace{x \xrightarrow{g\circ f} z}_{\text{arête}}\right\}\\
					\cup &\left\{ \underbrace{(x)}_{\text{chemin de longueur 0}} = \underbrace{(x\xrightarrow{id_{x}} x)}_{\text{arête}} \right\}
			\end{aligned}
			\end{equation*}
			On a alors $\mC = \left[\mG, \mE \right]$ et un foncteur de $\mC$ dans $\mD$ induit un homomorphisme de $\mG$ dans $\abs{\mD}$.
	\end{enumerate}
\end{exemple}
On va maintenant pouvoir définir la catégorie $\clam$.
On pose $\mG_{\lambda}$ le graphe des \lambdatermes (modulo \alphaconv) dont les arêtes sont les \betaredex: $M \xrightarrow{u} N$.
Il reste alors à définir l'ensemble d'équations, i.e. les chemins. Si $M \xrightarrow{u} P$ et $M\xrightarrow{v} Q$ pour $u \neq v$, et si $h_{v}$ est un développement complet de $v[u]$ et $h_{u}$ un développement complet de $u[v]$.
\begin{equation*}
	\mE = \left\{ (u;h_{v}, v;h_{u}) \right\}
\end{equation*}
Ceci se lit:
\begin{center}
	\begin{tikzcd}[remember picture]
	M\ar[ddd, "v"]\ar[r, "u"] & |[alias=P]|P\ar[d, "v_{1}"]\\
	& |[alias=N]|\phantom{}\ar[d, "\vdots"]\\
	& \phantom{}\ar[d, "v_{n}"]\\
	|[alias=Q]|Q\ar[r, "u' = h_{v}"] & N
	\end{tikzcd}
	\begin{tikzpicture}[overlay, remember picture]
		\node at ([xshift=.5cm, yshift=-.6cm]N) {$=h_{v}$};
	\node at ([xshift=-.5cm, yshift=-.4cm]Q) {inside out};
	\node at ([xshift=.5cm, yshift=.4cm]P) {outside in};
	\end{tikzpicture}
\end{center}

\begin{proposition}
	La catégorie $\clam$ peut être représentée par le graphe dont les sommets sont les \lambdatermes et les arêtes sont les multiredexes: $U: M \to N$.
	Pour $U \subseteq \Redex(M)$, on a $U: M\to N$ lorsque tout développement complet de $U$ réécrit $M$ en $N$:
	\begin{category}
		M\ar[r, "u_{1} \in U"] & M_{1}\ar[r, "u_{2} \in U\{u_{1}\}"] & M_{2}\ar[r] & \cdots\ar[r, "u_{n} \in U\{u_{1}\ldots u_{n - 1}\}"] & N \ar[loop right, "U\{u_{1}\ldots u_{n}\} = \emptyset"]
	\end{category}
	et dont les équations sont l'équation identité:
	\begin{equation*}
		\underbrace{\left( M \xrightarrow{\emptyset} M\right)}_{\text{longueur 1}} = \underbrace{(M)}_{\text{longueur 0}}
	\end{equation*}
	et les équations de la forme:
	\begin{equation*}
		\underbrace{M\xrightarrow{U} P \xrightarrow{V[U]} N}_{\text{chemin de longueur 2}} = \underbrace{M \xrightarrow{V} Q \xrightarrow{U[V]} N}_{\text{chemin de longueur 2}}
	\end{equation*}
	qui représentent:
	\begin{category}
		M\ar[r, "U"]\ar[d, "V"] & P\ar[d, "V\{U\}"]\\
		Q\ar[r, "U\{V\}"] & N
	\end{category}
	\label{prop:repr}
\end{proposition}
\begin{proof}
	Soit $\mD_{\lambda} = \left[ \mathcal{U}, \mF \right]$ la représentation qu'on vient de définir. On veut montrer que $\clam \simeq \mD_{\lambda}$.
	\begin{equation*}
		\begin{array}{rcl}
			\clam &\xrightarrow{J_{\lambda}}&\mD_{\lambda}\\
			M\xrightarrow{u} N & \longmapsto & M \xrightarrow{\{u\}} N\\
			\begin{tikzcd}
			M\ar[dd, "v"]\ar[r, "u"] & P\ar[d, "v_{1}"]\\
	& \phantom{}\ar[d, "v_{2}"]\\
	Q\ar[r, "u'"] & N
\end{tikzcd} &\longmapsto & \begin{tikzcd}
	M\ar[dd, "\{v\}"]\ar[r, "\{u\}"] & P\ar[d, "\{v_{1}\}"]\\
	& \phantom{}\ar[d, "\{v_{2}\}"]\\
	Q\ar[r, "\{u'\}"] & N
\end{tikzcd} =
\begin{tikzcd}
	M\ar[dd, "\{v\}"]\ar[r, "\{u\}"]\ar[ddr, "\{u; v\}"] & P\ar[d, "\{v_{1}\}"]\\
	& \phantom{}\ar[d, "\{v_{2}\}"]\\
	Q\ar[r, "\{u\}"] & N
\end{tikzcd}
		\end{array}
	\end{equation*}
	C'est cette égalité qu'il faut montrer.
	On donne pour cela le lemme suivant.
	\begin{lemme}
		\begin{category}
			M\ar[r, "u"]\ar[d, "\{u\}"]\ar[phantom, dr, "\sim_{\mathcal{F}}"] & N\\
			P\ar[ur, "U\{u\}"] & \phantom{}
		\end{category}
	\end{lemme}
	En effet:
	\begin{equation*}
		M \xrightarrow{U} N \sim_{F} M \xrightarrow{\{u\}} P \xrightarrow{U[u]} N
	\end{equation*}
	puisque
	\begin{equation*}
		M \xrightarrow{U} N \approx_{\mathcal{F}} M \xrightarrow{u} N \xrightarrow{\emptyset = V[u]} N \approx_{\mathcal{F}} M \xrightarrow{\{u\} = V} P \xrightarrow{U[u] = U[V]} N
	\end{equation*}
	Ceci nous donne bien un premier foncteur de $\clam$ dans $\mD_{\lambda}$.

	\medskip

	Dans l'autre sens:
	\begin{equation*}
		\begin{array}{rcl}
			\mD_{\lambda} & \xrightarrow{K_{\lambda}}& \clam\\
			M \xrightarrow{u} N & \longmapsto & \begin{tikzcd}
				M\ar[r] & \phantom{}\ar[r] & \phantom{}\ar[r, "f"]&\phantom{} \ar[r] & \phantom{}\ar[r] & N
			\end{tikzcd}
			\\
			\begin{tikzcd}
				M\ar[r, "U"]\ar[d, "V"] & P\ar[d, "V\{U\}"]\\
				Q \ar[r, "U\{V\}"] & N
			\end{tikzcd}& \longmapsto & \begin{tikzcd}
				M\ar[r, "f\propto V"]\ar[r, "g\propto V"]\ar[dr, "fg'\propto (U \cup V)"]\ar[dr, "g'f \propto (U\cup V)"'] & P\ar[d, "g'\propto V\{u\}"]\\
				Q\ar[r, "f'\propto U\{V\}"'] & N
			\end{tikzcd}
		\end{array}
	\end{equation*}
	Attention, la longueur n'est pas préservée.
	Ici, on utilise le lemme des développements finis \ref{prop:cheminfini}:
	\begin{proposition}
		Il n'existe pas de développement infini de $U \subseteq \Redex(M)$
	\end{proposition}
	\begin{proposition}
		Si $f, g$ sont des développements complets de $U$ (notation $f \propto U, g\propto U$), alors $f, g$ terminent sur le même \lambdaterme $N$ et $f\sim_{\mE} g$.
	\end{proposition}

	\medskip

	Il reste juste à vérifier que:
	\begin{equation*}
		J_{\lambda} \circ K_{\lambda} = \id_{\mD_{\lambda}} \hfill K_{\lambda} \circ J_{\lambda} = \id_{\clam}
	\end{equation*}
	ce qui termine la démonstration.
\end{proof}

On a montré que la catégorie $\clam$ des \lambdatermes et chemins de $\beta$-réécriture modulo permutation peut être présentée par le graphe $\mU_{\lambda}$ des \lambdatermes (modulo $\alpha$-conversion) dont les arêtes sont les multi-redexs $(M, U): M\to N$ où $N$ est obtenu comme le \lambdaterme arrivée de tout développement complet de $U$ et les équations:
\begin{category}[]
	& P\ar[dr, "v\{u\}"] & \\
	M\ar[rr, "u\circ v"]\ar[ur, "u"]\ar[dr, "v"'] & & N\\
	& Q\ar[ur, "u\{v\}"'] &
\end{category}
c'est à dire $u\circ v[u] \equiv v\circ u[v]$ et $\id_{M} = (M, \emptyset)$.

Soient $D: M \to P$ et $E: M \to Q$ deux chemins de $\mU_{\lambda}$.
On définit un chemin $D / E : Q \to N$ par induction sur les longueurs de $D$ et $E$:
\begin{enumerate}
	\item $\id_{M} / V = \id_{N}$ pour $V: M \to N$ une multiredex.
	\item $U \cdot D / V = U[V] \cdot D / V[U]$
	\item $D / \id_{M} = D$,
	\item $D / V\cdot E = (D / V) / E$
\end{enumerate}

\begin{proposition}
	Soient $D: M \to P$, $E: M \to Q$ deux chemins de $\mU_{\lambda}$.
	On a :
	\begin{equation*}
		D \cdot (E/D) \equiv E\cdot(D/E)
	\end{equation*}
	\label{prop:equivresiduschemins}
\end{proposition}
\begin{proof}
	Par induction sur $D$ et $E$.
\end{proof}

\begin{proposition}
Si $D \equiv D' : M \to P$ et $E \equiv E': M \to Q$ alors:
\begin{equation*}
	D / E \equiv D' / E'
\end{equation*}
\end{proposition}
\begin{proof}
	On procède en deux étapes:
	\begin{itemize}
		\item $D / E \equiv D / E'$ lorsque $E \equiv E'$
		\item $D / E \equiv D' / E$ lorsque $D \equiv D'$.
	\end{itemize}
\end{proof}

Les démonstrations des deux points précédents reposent sur le lemme suivant dit \emph{du cube}
\begin{lemme}[du Cube]
	Soient $U, V, W \subseteq \Redex(M)$.
	Alors:
	\begin{category}[]
		& R\ar[dl, "V/W"]\ar[r, "U/V"] & \phantom{}\ar[dl, "v'"]\\
		\phantom{}\ar[d, "u'"] & M\ar[dl, "V"]\ar[r, "U"]\ar[u, "W"] & P\ar[u, "W/U"]\ar[dl, "U/U"]\\
		Q\ar[r, "U/V"]\ar[u, "W/V"] & \phantom{}\ar[u, "w'"]
	\end{category}
	où $w' = w / (u\cdot v/u) = w / (v \cdot u / v)$.
	On peut aussi voir cela comme:
	\begin{category}[]
		&\phantom{} &\\
		\phantom{}\ar[ur, "V'"] &\phantom{}\ar[u, "W'"] & \phantom{}\ar[ul, "U'"]\\
		\phantom{}\ar[u, "W/U"]\ar[ur, "V/U"] & & \phantom{}\ar[u, "W"]\ar[ul, "U/V"]\\
		& \phantom{}\ar[ur, "V"]\ar[ul, "U"] &
	\end{category}
	\begin{category}[]
		&\phantom{} &\\
		\phantom{}\ar[ur, "V'"] & & \phantom{}\ar[ul, "U'"]\\
		\phantom{}\ar[u, "W/U"] & \phantom{}\ar[ul, "U/W"]\ar[ur, "V/W"] & \phantom{}\ar[u, "W"]\\
		& \phantom{}\ar[ur, "V"]\ar[ul, "U"]\ar[u, "W"] &
	\end{category}

\end{lemme}

On en déduit une construction $f/g$ pour toute paire de flèches $f: M \to P$, $g: M\to Q$.
La proposition \ref{prop:equivresiduschemins} montre que:
\begin{equation*}
	f \cdot (g/f) = g\cdot (f/g) \text{ dans } \clam
\end{equation*}
\begin{proposition}
	Quelques propriétés de la construction ci-dessus:
	\begin{enumerate}
		\item Pour $f: M \to N$, $f / f = \id_{N}$.
		\item $(g \circ f) / f = g$ dans $\clam$.
		\item $f / \id_{M} = f$
		\item $f / (h\circ g) = (f / g) / h$.
	\end{enumerate}
	\label{prop:proprieteresidufleche}
\end{proposition}
\begin{proof}
	\begin{enumerate}
		\item Si $f$ est présentée par $D : M \to N$ de longueur $k$, alors $D / D = \underbrace{(N, \emptyset)\to (N, \emptyset)}_{k \text{ fois}}$
		\item Conséquence de l'équation:
			\begin{equation*}
				(g \circ f) / h = g / (h / f) \circ (f/h)
			\end{equation*}
			qui représente le diagramme suivant:
			\begin{category}
				M\ar[d, "h"]\ar[r, "f"] & P\ar[d, "h/f"]\ar[r, "g"] & N\ar[d]\\
				Q\ar[r, "f/h"'] & \phantom{}\ar[r, "g / (h/f)"'] & \phantom{}
			\end{category}
			En effet:
			\begin{equation*}
				(g \circ f) / f = g / (f / f) \circ (f / f)
			\end{equation*}
	\end{enumerate}
\end{proof}

\begin{thm}[Lévy (1979) --- Church-Rosser Algébrique]
	La catégorie $\clam$ a les pushouts:
	pour toute paire $f: M \to P$ et $g: M \to Q$, le carré commutatif:
	\begin{category}
		M\ar[r, "f"]\ar[d, "g"'] & P\ar[d, "g/f"]\\
		Q\ar[r, "f/g"] & N
	\end{category}
	satisfait la propriété universelle suivante:
	pour toute paire $f' : Q \to R, g': P \to S$ telle que:
	\begin{category}
		M \ar[d, "g"]\ar["f", r]& P\ar[d, "g'"]\\
		Q \ar[r, "f'"] & N
	\end{category}
	il existe un et un seul morphisme dans $\clam$ $h : N\to R$ tel que le diagramme suivant commute:
	\begin{category}[]
		& M\ar[dl, "f"']\ar[dr, "g"] &\\
		P\ar[dr, "g/f"]\ar[ddr, bend left, "g'"'] & & Q\ar[dl, "f/g"']\ar[ddl, bend right, "f'"]\\
		& N\ar[d, dashed, "\exists! h"] &\\
		& R &
	\end{category}
	c'est à dire que $h \circ (f / g) = f'$ et $h\circ (g/f) = g'$.
\end{thm}

Démontrons juste une propriété qui nous sera utile dans la démonstration:
\begin{proposition}
	Tout morphisme $f : M \to N$ est un épimorphisme dans $\clam$.
	\label{prop:morphismeépimorphisme}
\end{proposition}
\begin{proof}
	Si $M \xrightarrow{f} N \xrightarrow[g_{2}]{g_{1}} P$ sont telles que $f; g_{1} = f ; g_{2}$:
	\begin{equation*}
		g_{2} = (f; g_{2}) / f = (f ; g_{1}) / f) = g_{1}
	\end{equation*}
\end{proof}

\begin{proof}
	On pose: $h = (f ; g') / (f \cup g) = (g ; f') / f\cup g$ où $f \cup g$ est une notation pour $f ; (g / f) = g ; (f / g)$
	On a alors que:
	\begin{equation*}
		h = f' / (f / g) = g' / (g / f)
	\end{equation*}
	et donc on vérifie bien que:
	\begin{equation*}
		g' = (f; g') / f = (g; f') / f = (g/f) ; f' / (f/g) = (g / f) ; h
	\end{equation*}
	De même, $f' = (f / g); h$.\\
	L'unicité de $h$ vient de la propriété \ref{prop:morphismeépimorphisme}
\end{proof}

\section{Adjonctions}
\subsection{Notion d'Adjonction}
La notion d'adjonction est une généralisation de la notion de bijection pour les catégories.
Soient $A$ et $B$ deux ensembles. Soient $l : A \to B$ et $r: B \to A$ des fonctions.
Les deux propriétés suivantes sont équivalentes:
\begin{enumerate}
	\item $l$ et $r$ sont des bijections telles que $l \circ r = \id_{B}$ et $r \circ l = \id_{A}$.
	\item Pour tout $a \in A$, pour tout $b \in B$, $la = b \leftrightarrow a = rb$.
\end{enumerate}

\begin{definition}
	Soient $\A, \B$ deux catégories et $L : \A \to \B$ et $R: \B \to \A$ deux foncteurs.
	Une \emph{adjoinction} entre $L$ et $R$ (où $L$ est adjoint à gauche et $R$ est adjoint à droite) est la déonnée d'une famille de bijections paramétrées par les objets de $\A$ et de $\B$:
	\begin{equation*}
		\phi_{A, B} : \B\left(LA, B \right)\xrightarrow{\simequiv} \A(A, RB)
	\end{equation*}
	On demande de plus que la famille $\Phi$ soit naturelle en $A$ et $B$.
	\label{def:adjonction}
\end{definition}

\begin{definition}
	Toute adjonction $L \dashv R$ induit une famille de flèches paramétrées par $A \in \A$:
	\begin{equation*}
		\eta_{A}: A \to RLA \text{ l'unité de l'adjonction}
	\end{equation*}
	et une famille de flèches paramétrées par $B \in \B$:
	\begin{equation*}
		\epsilon_{B} : LRB \to B \text{ la counité de l'adjonction}
	\end{equation*}
	En effet:
	\begin{equation*}
		\eta_{A} = \phi_{A, LA}\left(\id_{LA} : LA \to LA \right)
	\end{equation*}
	et similairement:
	\begin{equation*}
		\epsilon_{B} = \phi_{RB, B}^{-1}\left(\id_{RB}: RB \to RB \right)
	\end{equation*}
	\label{def:unitécounité}
\end{definition}

\begin{exemple}
	Prenons $\A = Ens$ la catégorie des ensembles et fonctions et $\B = Mon$ la catégorie des monoïdes et homomorphismes.
	On prend $R = Forget$ le foncteur qui a $M = (\abs{M}, \cdot_{M}, e_{M}) \xrightarrow{f} N = (\abs{N}, \cdot_{N}, e_{N})$ renvoie $\abs{M} \xrightarrow{support(f)} \abs{N}$.
	On prend $L = Free$ le foncteur qui a $A$ associe $A^{*}$ le monoïde des mots finis sur l'alphabet $A$.
	L'adjonction $L \dashv R$ est donnée par la famille de bijections:
	\begin{equation*}
		\phi_{A, M}: Mon(A^{*}, M) \to Ens(A, \abs{M})
	\end{equation*}
	telles que
	$\phi_{A, M}(h : A^{*} \to M): a\in A \mapsto h([a]) \in M$.
	Alors, $\phi_{A, M}^{-1}: (f: A\to M) \mapsto (f^{\dag}: A^{*} \to M)$ tel que $f^{\dag}([a_{1}, \ldots a_{n}]) = fa_{1}\cdot_{M} \cdots \cdot_{M}fa_{n}$.
	Ici, on a donc:
	\begin{equation*}
		\eta_{A} = \Phi_{A, A^{*}}(\id_{A^{*}}: A^{*} \to A^{*})
	\end{equation*}
	et:
	\begin{equation*}
		\epsilon_{M}: Free\ Forget\ M \to M, [a_{1}, \ldots, a_{n}] \mapsto a_{1}\cdot_{M} \cdots \cdot_{M}a_{n}
	\end{equation*}
	Cette dernière opération s'appelle l'évaluation.
\end{exemple}

\section{TD 1}
\subsection{Catégories et Foncteurs}
\begin{enumerate}
	\item On a le tableau suivant:
	      \begin{tabular}{>{\sc}ccc}
		      \bf Catégorie & \bf Objets           & \bf Flèches            \\
		      \midrule
		      Set           & Ensembles            & Fonctions              \\
		      Top           & Espaces Topologiques & Fonctions Continues    \\
		      Vect          & Espaces Vectoriels   & Applications Linéaires \\
		      Grp           & Groupes              & Morphismes
	      \end{tabular}
	\item Un foncteur est un morphisme entre catégories.
	\item La catégorie \textsc{Cat} est la catégorie dont les objets sont des catégories et les flèches sont des foncteurs
\end{enumerate}

\subsection{Catégories Cartésiennes}
\begin{description}
	\item[Question 3, 4, 5] Voir la preuve de \ref{prop:isomorphismeterminaux}.
	\item[Question 6] On a le diagramme commutatif suivant:
	      \begin{category}[]
		      & A\arrow[bend right]{ddl}\arrow[bend left]{ddr}{\id_{A}}\arrow[dotted]{d}{h} & \\
		      & \term \times A\arrow{dl}\arrow{dr}{\pi_{A}}\arrow{dd}{\pi_{A}} & \\
		      \term & & A\arrow[bend left]{dl}{\id_{A}}\\
		      & A &
	      \end{category}
	      Donc $\pi_{A} \circ h = \id_{A}$.
	      \begin{category}[]
		      & \term\times A\arrow{d}{\pi_{A}}\arrow[bend left]{ddr}{\pi_{1}}\arrow[bend right]{ddl}{\pi_{A}} & \\
		      & A\arrow{dl}{\id_{A}}\arrow{d}{h} & \\
		      A & \term \times A\arrow{l}{\pi_{A}}\arrow{r}{\pi_{1}} & \term
	      \end{category}

	      De même pour $A \times \term$, par symétrie.
	      On peut par ailleurs procéder de même que pour les produits cartésiens pour montrer que $A\times \term \simeq \term\times A$.
	\item[Question 7] On montre que $B\times A$ vérifie les propriétés de produit cartésien pour $A$ et $B$:
	      \begin{category}[]
		      & C\arrow{dr}{f}\arrow{dl}{g}\arrow[dotted]{d}{h} & \\
		      B & B \times A\arrow{l}{\pi_{B}}\arrow{r}{\pi_{A}} & A
	      \end{category}
	\item[Question 8]
	      On a le diagramme suivant:
	      \begin{category}[]
		      & & \left(A\times B\right)\times C\arrow[color=black, dl, "\pi_{A\times B}"]\arrow[color=vulm, ddrr, "\pi_{C}"]\arrow[color=blue, dashed, dddr, "\pi_{B\times C}"] & & \\
		      & A\times B\arrow[color=vulm, dl, "\pi_{A}"]\arrow[color=vulm, dr, "\pi_{B}"] & & & \\
		      A & & B & & C \\
		      & & & B\times C\arrow[color=yulm, ul, "\pi_{B}"]\arrow[color=yulm, ur, "\pi_{C}"]\\
		      & & A\times \left(B\times C\right)\arrow[color=yulm, uull, "\pi_{A}"]\arrow[color=black, ur, "\pi_{B\times C}"]\arrow[color=blue, dashed, uuul, "\pi_{A\times B}"] & &
	      \end{category}
	      On a donc un morphisme de $(A\times B) \times C \to B$ et un morphisme $(A\times B)\times C \to C$.
	      Il existe donc un (unique) morphisme $(A\times B)\times C\to B\times C$ (faisant commuter le diagramme idoine).
	      On a maintenant deux morphismes depuis $(A\times B)\times C$:
	      \begin{itemize}
		      \item un vers $A$
		      \item un vers $B \times C$
	      \end{itemize}
	      On peut donc trouver un (unique) morphisme $h$:$(A\times B)\times C \to A\times (B\times C)$ (faisant toujours commuter le diagramme idoine).
	      On construit de la même façon $\tilde{h}: A\times (B\times C) \to (A\times B) \times C$.
	      On vérifie de façon similaire à la question précédente que $h\circ \tilde{h} = \id$ et $\tilde{h} \circ h = id$.
	      Donc $(A\times B)\times C \simeq A\times (B\times C)$.
	\item[Question 9] On notera $A + B$ le coproduit de $A$ et $B$.
	      Il doit faire le diagramme commuter:
	      \begin{category}[]
		      & C &\\
		      A\arrow[ur, "f"]\arrow[r, "i_{A}" swap] & A\bigsqcup B\arrow[dashed, "h", u] & B\arrow[ul, "g" swap]\arrow[l, "i_{2}"]
	      \end{category}
	      On remarque notamment que $A + B$ est un coproduit de $A$ et $B$ dans $\cont$ si et seulement si $A + B$ est un produit de $A$ et $B$ dans $\cont^{op}$.
	      En prenant pour $A + B$ (si $A, B \in \mathrm{Set}$) l'ensemble abstrait défini à isomorphisme près par:
	      \begin{equation*}
		      \left\{ (A, a) \mid a\in A \right\} \cup \left\{ (B, b) \mid b \in B \right\}
	      \end{equation*}
	      avec $i_{A}$ et $i_{B}$ les inclusions.
	      On a bien le résultat puisque si $f: A \to C$ et $g: B\to C$, la fonction $h: (A, x) \mapsto f(x); (B, y) \mapsto g(y)$ est unique car entièrement définie sur $A + B$.
	      Formellement c'est l'union disjointe.
	\item[Question 10] L'objet terminal de $\mathrm{Rel}$ est l'ensemble vide. En effet, on a toujours une unique relation entre $X$ et l'ensemble vide: la relation vide.
	      Il est clair que $\mathrm{Rel}^{op} = \mathrm{Rel}$.
	      L'union disjointe est le produit cartésien.
	      On prend comme projection $\pi_{A} = \left\{ \left( (A, e), e \right)\mid e \in A \right\}$
	\item[Question 11] On prend pour objet terminal l'espace vectoriel nul.
	      On prend comme produit cartésien la somme directe disjointe sur les bases.
	      Par le même raisonnement que précédemment, on a le résultat.
	\item[Question 12] L'objet terminal est la catégorie triviale avec un objet et un morphisme.
	      On définit le produit de cartésien par des couples d'objet et dont les flèches sont des couples de fonctions.
	      La projection est alors similaire à celle de $\mathrm{Set}$.
	\item[Question 13] De la même manière que précédemment, en considérant des couples de morphisme du produit cartésien de l'origine dans le produit cartésien de l'image.
	      On a le résultat par propriété fondamentale.
\end{description}



\section{TD 2}
\subsection{Produits Fibrés}
\begin{definition}
	Un diagramme commutatif dans $\cont$:
	\begin{category}[]
		P\ar[r, "p_{2}"]\ar[d, "p_{1}"]\ar[dr, phantom, "(*)"] & Y\ar[d, "g"]\\
		X\ar[r, "f"] & Z
	\end{category}
	est un pullback, tiré en arrière ou produit fibré de $X$ et $Y$ au dessus de $Z$ quand pour tout diagramme commutatif:
	\begin{category}
		Q\arrow["q_{2}", bend left, drr]\arrow["q_{1}"', bend right, ddr] & & \\
		& & Y\arrow["g", d]\\
		& X\arrow["f"', r] & Z
	\end{category}
	il existe un unique morphisme $h: Q \to P$ tel que le diagramme ci-dessous commute:
	\begin{category}[]
		Q\arrow["q_{2}", bend left, drr]\arrow[dr, dashed, "h"]\arrow["q_{1}"', bend right, ddr] & & \\
		& P\ar[r, "p_{2}"]\ar[d, "p_{1}"] & Y\arrow["g", d]\\
		& X\arrow["f"', r] & Z
	\end{category}
	\label{def:pullback}
\end{definition}

\begin{description}
	\item[Question 1] On propose pour $P$ l'ensemble des couples $(x, y)$ dont les composantes sont dans les mêmes fibres, i.e., $P = \left\{(x, y) \in \hat{X} \times \hat{Y} \mid f(x) = g(y) \right\}$ où $\hat{X}$ est un système de représentants des classes d'équivalence définies par les fibres de $X$ sous $f$
	      Les projections sont alors les projections sur la première et la deuxième composante.

	      On a donc une unique définition du morphisme $h$ en considérant si $q \in Q$, $h(q) \in f^{-1}(f(q_{1}(q)))\cap \hat{X} \times g^{-1}(g(q_{2}(q))) \cap \hat{Y}$
	\item[Question 2 et 3] Ajouter un morphisme $Q \to Y''$ crée un diagramme commutatif avec les bords bas et droit de $(c)$.
	      Le carré au dessus de $(a)$ ainsi créé a un morphisme vers $Y'$ qui, puisque $Y'$ est un pullback pour $Y$ et $X'$ au dessus de $X$, créé un diagramme carré commutant au dessus de $X'' \to X' \to X$ et $Y \to X$.
	      \begin{category}
		      Q\ar[dr, dashed, shift left, "h"]\ar[dashed, color=blue, "h''"', dr, shift right] \ar[color=vulm, "a", drrr, bend left]\ar[ddr, bend right=30, "b"']\ar[ddrr, bend right=100, color=vulm, "f'\circ b"']\arrow[drr, bend left=15, "h'", color=vulm] & & &\\
		      & Y''\ar[d, "g''"', color=blue]\ar[r, "p'", color=blue] & Y'\ar[r, "p", color=vulm]\ar[shift right, color=blue, d]\ar[d, shift left, color=vulm, "g'"] & Y\ar[d, "g"', color=vulm]\\
		      & X''\ar[r, "f'"', color=blue] & X'\ar[r, "f"', color=vulm] & X
	      \end{category}
	      Finalement, le carré de gauche est un pullback si et seulement si le grand carré est un pullback.
	\item[Question 4]
	      On considère l'ensemble $X = \{1\}$ et l'ensemble $Y = \{1, 2\}$ ainsi que les fonctions $i: 1 \in X \mapsto 1\in Y$ et $p: y \in Y \mapsto 1\in X$.
	      Alors:
	      \begin{category}
		      X\arrow[r, "\id"]\arrow[d, "\id"] & X\arrow[r, "\id"]\arrow[d, "i"] & X\arrow[d, "\id"]\\
		      X\arrow[r, "i"] & Y\arrow[r, "p"] & X
	      \end{category}
	      et donc on a le résultat.
\end{description}

\subsection{Monomorphismes et Épimorphismes}
\begin{description}
	\item[Question 1] Trivial, je le ferai faire à un sup en khôlle.
	\item[Question 2] Trivial, je le ferai faire à un autre sup en khôlle.
	\item[Question 3] Si on a:
	      \begin{align*}
		      \forall a, b: X\to A, f\circ a = f\circ b \Rightarrow a = b \\
		      \forall a, b: X\to B, g\circ a = g\circ b \Rightarrow a = b
	      \end{align*}
	      En particulier, pour tous $a, b : X\to A$:
	      \begin{equation*}
		      \begin{aligned}
			      g\circ f \circ a = g\circ f \circ b  \Longrightarrow & g \circ (f\circ a) = g\circ (f\circ b) \\
			      \text{(Par propriété de $g$) } \Longrightarrow       & f\circ a = f\circ b                    \\
			      \text{(Par propriété de $f$) } \Longrightarrow       & a = b
		      \end{aligned}
	      \end{equation*}
	      On procède de même pour les épimorphismes.
	\item[Question 4] Si $m$ est un mono, le résultat est clair puisqu'alors toutes les flèches telles que $m\circ q_{1} = m\circ q_{2} = m\circ \id \circ h$ induisent $q_{1} = q_{2} = \id \circ h = h$.\\
	      Réciproquement, si on a le diagramme suivant:
	      \begin{category}[]
		      Q\arrow["q_{2}", bend left, drr]\arrow[dr, dashed, "h"]\arrow["q_{1}"', bend right, ddr] & & \\
		      & A\ar[r, "\id"]\ar[d, "\id"] & A\arrow["m", d]\\
		      & A\arrow["m"', r] & B
	      \end{category}
	      en particulier, $h = q_{1}$ et $h = q_{2}$ conviennent, donc $q_{1} = q_{2}$ par unicité de $h$.
	      Comme de plus, puisque le diagramme
	      \begin{category}[]
		      A\ar[r, "\id"]\ar[d, "\id"] & A\arrow["m", d]\\
		      A\arrow["m"', r] & B

	      \end{category}
	      est un pullback, on a le diagramme précédent dès que $m \circ q_{2} = m \circ q_{1}$ et donc $m$ est un mono.
	\item[Question 5] Si on a le pullback suivant, on suppose que $m$ est un monomorphisme:
	      \begin{category}
		      V\ar[r, "p"]\ar[d, "m'"'] & U\arrow["m", d]\\
		      B\arrow["f"', r] & A
	      \end{category}
	      Soit $Q$ un objet et $h, h': Q \to V$ telles que $m'\circ h = m'\circ h'$.
	      \begin{category}
		      Q\arrow[dr, dashed, "h", "h'" swap] & & \\
		      & V\ar[r, "p"]\ar[d, "m'"'] & U\arrow["m", d]\\
		      & B\arrow["f"', r] & A
	      \end{category}
	      En posant $q_{1} = m'\circ h', q_{2} = p\circ h$, on a un pullback: il existe une unique application $l$ telle que: $m \circ p\circ l = m\circ q_{2}$ et $f\circ m'\circ l = f\circ q_{1}$. $l = h'$ et $l = h$ conviennent, donc $h = h'$.
\end{description}

\subsection{Catégories Quotients et Catégories Sous-Objets}
\begin{description}
	\item[Question 1] It is clear that the arrow $\id_{(X, f)}: (X, f) \to (X, f)$ defined by the morphism $\id_{X} : X\to X$ is an identity in $\cont/A$.
	      Clearly, since the following diagram commutes, the composition is associative:
	      \begin{category}
		      X\ar[dr, "a"']\ar[r, "h_{1}"] & Y\ar[d, "b"]\ar[r, "h_2"]& Z\ar[dl, "c"]\\
		      & A &
	      \end{category}
	      Thus, $\cont/A$ is a category.
	\item[Question 2] We have the above commutative diagram if and only if $g\circ p_{2} = f\circ p_{1}$ i.e. if and only if there exists $u : P\to Z$ such that the following diagram commutes:
	      \begin{category}
		      P\ar["p_2", r]\ar[d, "p_{1}"]\ar[dr, "u"]& Y\ar[d, "g"]\\
		      X\ar[r, "f"] & Z
	      \end{category}
	      This is exactly equivalent to the fact that the two diagrams below commute:
	      \begin{center}
		      \begin{minipage}[]{.4\textwidth}
			      \begin{category}
				      P\ar[dr, "u"]\ar[r, "p_{2}"]& Y \ar[d, "g"] \\
				      & Z
			      \end{category}
		      \end{minipage}
		      \begin{minipage}[]{.4\textwidth}
			      \begin{category}
				      P\ar[dr, "u"]\ar[d, "p_{1}"] &\\
				      X\ar[r, "f"] & Z
			      \end{category}
		      \end{minipage}
	      \end{center}
	      That is, there is a diagram in $\cont/Z$:
	      \begin{category}[]
		      & (P, u)\ar[dl, "p_{1}"]\ar[dr, "p_{2}"] & \\
		      (X, f) &  & (Y, g)
	      \end{category}
	      Moreover, if the first diagram is a pullback, if $O$ is an object in $\cont$ and $q_{1}: O\to X$ and $q_{2}: O\to Y$ make the following diagramm commute:
	      \begin{category}
		      O\ar[bend left, "q_{2}", drr]\ar[bend right, "q_{1}"', ddr]\ar[dashed, dr, "h"] & &\\
		      & P\ar["p_2", r]\ar[d, "p_{1}"]\ar[dr, "u"]& Y\ar[d, "g"]\\
		      & X\ar[r, "f"] & Z
	      \end{category}
	      then in particular, in $\cont/Z$:
	      \begin{category}[]
		      & (O, m)\ar[bend right, ddl, "q_{1}"']\ar[bend left, ddr, "q_{2}"]\ar[dashed, d, "h"] & \\
		      & (P, u)\ar[dl, "p_{1}"]\ar[dr, "p_{2}"] & \\
		      (X, f) &  & (Y, g)
	      \end{category}
	      Thus, the first diagram defines a pullback if and only if the second diagram defines a cartesian product.
	      In particular, pullbacks are defined up to isomorphism, since we can translate the existence of two pullbacks as the existence of two cartesian products and retranslate back the isomorphism.
	\item[Question 3] Since $n$ is a mono, if we have:
	      \begin{category}
		      U\ar[rr, "h_{1}", "h_{2}"']\ar[dr, "m"] & & V\ar[dl, "n"]\\
		      & A &
	      \end{category}
	      then $n \circ h_{1} = m = n\circ h_{2}$ and thus $h_{1} = h_{2}$.
	\item[Question 4] We have a preorder on monos defined as: $i \leq j$ if and only if there exists $k$ such that $i = jk$.
	      Thus, seeing that monos are injective functions, there is an arrow from $U$ to $V$ if and only if $\abs{U} \leq \abs{V}$, thus, up to isomorphism: there is an arrow from $U$ to $V$ if and only if $U \subseteq V$.
	\item[Question 5] We have, for all $m: U\to A$ in $Sub(A)$:
	      \begin{category}
		      V\ar[r, "p"]\ar[d, "m'"'] & U\arrow["m", d]\\
		      B\arrow["f"', r] & A
	      \end{category}
	      In Set, this is the fucking direct image.
\end{description}
\section{TD 3}
\subsection{Égaliseurs et Coégaliseurs}
\begin{description}
	\item[Question 1] On prend pour $E$ l'ensemble $\left\{s \in X\mid f(s) = g(s) \right\}$. On pose alors $m$ l'injection $E \to X$.
	      On a alors trivialement, si $f\circ n = g\circ n$, $Im(n) \subseteq E$ vu comme partie de $X$.
	      D'où le résultat.
	\item[Question 2] Si on a $n: A \to E$, $m\circ n: A \to X$. Puisque $fmn = gmn$, la factorisation $mn$ est unique par définition d'un égaliseur donc $m$ est un monomorphisme.
	\item[Question 3] Un co-égaliseur de $f, g$ est une flèche $m : Y \to Q$ telle que $m\circ f = m\circ g$ et pour toute flèche $n: Y \to F$ telle que $n \circ f = n \circ g$, on a une unique factorisation $n = hm$.
	      Autrement dit, un co-égaliseur de $f, g$ est un égaliseur des flèches duales de $f, g$ dans la catégorie duale.
	\item[Question 4] Le co-égaliseur étant le dual d'un égaliseur, c'est le dual d'un mono, et donc un épimorphisme.
	\item[Question 5] Le co-égaliseur $Q$ de deux fonctions dans $\mathrm{Set}$ est l'ensemble quotient par $m: f(x) \tilde g(x)$ avec $m$ la projection.
	      En effet, si $n \circ f = n\circ g$, alors en particulier, l'image de $x \in E$ est entièrement déterminée par sa classe d'équivalence sous $m$.
	\item[Question 6] Toute fonction surjective est la projection sur un ensemble de classe d'équivalences.
	      En prenant pour $f, g$ deux fonctions qui sont égales sur $Y / e$, on a le résultat.
\end{description}
\subsection{Factorisation Epi-Mono}
\begin{description}
	\item[Question 1] On définit un ensemble $U$ par $U = X/f$. Alors $e: X \to U, x \mapsto [f(x)]$ est surjective et $m : [f(x)] \to f(x)$ est injective puisque $\abs{U} = \abs{\Im(f)} = \abs{\Im(m)}$.
	\item[Question 2] Si $e$ est injective et $m$ est surjective (en particulier $e$ est un epi et $m$ est un mono), et si $u, v$ font commuter le diagramme suivant:
	      \begin{category}
		      A\ar["u", r]\ar[d, "e"] & X\ar[d, "m"] \\
		      B\ar[r, "v"] & Y
	      \end{category}
	      alors, puisque $e$ est surjective, il existe $s$ une section telle que $e \circ s = \id$. En posant $h = us$, on a bien le résultat: si $s'$ est une autre section, $mus = ves = v =  ves' = mus'$.
	\item[Question 3] Puisque toute composée de fonctions surjectives (resp. injectives) est surjective (resp. injective), $\left(\mathcal{E}, \mathcal{M}\right)$ définit un système de factorisation.
	\item[Question 4] On considère d'abord $e_{2} \circ u$ et $v\circ m_{1}$:
	      \begin{category}
		      X_{1}\ar[dr, "e_{2} \circ u"']\ar[r, "e_{1}"] & U_{1}\ar[dr, "v\circ m_{1}"] &\\
		      & U_{2}\ar[r, "m_{2}"'] & Y_{2}
	      \end{category}
	      Il existe donc une unique flèche $h: U_{1} \to U_{2}$ qui fait commuter le diagramme:
	      \begin{category}
		      X_{1}\ar[r, "e_{1}"]\ar[d, "u"'] & U_{1}\ar[r, "m_{1}"]\ar[d, dashed, "h" description] &Y_{1}\ar[d, "v"]\\
		      X_{2}\ar[r, "e_{2}"'] & U_{2}\ar[r, "m_{2}"'] & Y_{2}
	      \end{category}

\end{description}

\end{document}
